<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spark Ad Studio â€” Uygulama</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:rgba(255,255,255,.06);
      --muted:rgba(255,255,255,.72);
      --border:rgba(255,255,255,.12);
      --r:16px;
      --sh:0 14px 32px rgba(0,0,0,.35);
      --free1:#3b82f6; --free2:#22c55e;
      --inf1:#c026d3; --inf2:#ec4899;
      --pro1:#f59e0b; --pro2:#fde68a;
      --ok1:#22c55e; --ok2:#60a5fa;
      --game1:#a78bfa; --game2:#f472b6;
      --brand1:#60a5fa; --brand2:#34d399;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,Segoe UI,Arial; color:#fff; background:
        radial-gradient(900px 480px at 10% 10%, rgba(59,130,246,.18), transparent 40%),
        radial-gradient(900px 480px at 90% 90%, rgba(236,72,153,.14), transparent 40%),
        var(--bg);
      padding:18px;
    }
    .wrap{max-width:1180px;margin:0 auto}
    .top{
      display:flex; gap:14px; align-items:center; justify-content:space-between;
      padding:12px 14px; border:1px solid var(--border); border-radius:var(--r);
      background:rgba(255,255,255,.04); box-shadow:var(--sh);
      position:sticky; top:12px; backdrop-filter: blur(10px); z-index:5;
    }
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;
      background:linear-gradient(135deg,#3b82f6,#a78bfa); font-weight:900}
    .title{font-weight:900;letter-spacing:-.02em}
    .sub{font-size:12px;color:var(--muted)}
    .actions{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    select,button,textarea,input{
      font:inherit; color:#fff; background:rgba(255,255,255,.06);
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
    }
    select{cursor:pointer}
    button{cursor:pointer; font-weight:900}
    button.primary{
      border:0; background:linear-gradient(90deg,#22c55e,#3b82f6);
      color:#07151f; padding:10px 14px;
    }
    button.ghost{background:transparent}
    button:disabled{opacity:.55;cursor:not-allowed}

    .grid{display:grid;grid-template-columns:1.05fr .95fr;gap:14px;margin-top:14px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}
    .panel{
      border:1px solid var(--border); border-radius:var(--r);
      background:rgba(255,255,255,.04); box-shadow:var(--sh);
      padding:14px;
    }
    h2{margin:0 0 10px 0;font-size:16px}
    .muted{color:var(--muted);font-size:13px;line-height:1.4}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    textarea{width:100%;min-height:140px;resize:vertical}

    .packs{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
    @media (max-width:980px){.packs{grid-template-columns:1fr}}
    .pack{
      padding:12px; border-radius:14px; border:1px solid var(--border);
      background:rgba(255,255,255,.04); cursor:pointer; position:relative; overflow:hidden;
      transition: transform .08s ease;
    }
    .pack:hover{transform: translateY(-2px)}
    .pack.active{outline:2px solid rgba(255,255,255,.34)}
    .tag{
      position:absolute; top:10px; right:10px;
      padding:6px 10px; border-radius:999px; font-size:12px; font-weight:900;
      background:rgba(255,255,255,.10);
    }
    .pack.free{border-color:rgba(59,130,246,.35)}
    .pack.free .tag{background:linear-gradient(90deg,var(--free1),var(--free2))}
    .pack.inf{border-color:rgba(192,38,211,.35)}
    .pack.inf .tag{background:linear-gradient(90deg,var(--inf1),var(--inf2))}
    .pack.pro{border-color:rgba(245,158,11,.35)}
    .pack.pro .tag{background:linear-gradient(90deg,var(--pro1),var(--pro2)); color:#111827}
    .pname{font-weight:900}
    .pprice{font-size:18px;font-weight:900;margin:6px 0}
    .pillrow{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
    .pill{font-size:12px;color:var(--muted);border:1px solid var(--border);padding:6px 10px;border-radius:999px}

    .templates{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
    @media (max-width:520px){.templates{grid-template-columns:1fr}}
    .tpl{padding:10px;border-radius:14px;border:1px solid var(--border);background:rgba(255,255,255,.03);cursor:pointer}
    .tpl b{display:block;margin-bottom:3px}

    .cards{display:flex;flex-direction:column;gap:10px;margin-top:10px}
    .card{
      border:1px solid var(--border); border-radius:14px; background:rgba(0,0,0,.24);
      padding:12px;
    }
    .cardhead{display:flex;justify-content:space-between;gap:10px;align-items:center}
    .chip{
      font-size:12px;font-weight:900;border-radius:999px;padding:6px 10px;border:1px solid var(--border);
      background:rgba(255,255,255,.06); color:#fff;
    }
    .chip.theme-influencer{background:linear-gradient(90deg,var(--inf1),var(--inf2)); border:0}
    .chip.theme-oyun{background:linear-gradient(90deg,var(--game1),var(--game2)); border:0}
    .chip.theme-marka{background:linear-gradient(90deg,var(--brand1),var(--brand2)); border:0}
    .chip.theme-okul{background:linear-gradient(90deg,var(--ok1),var(--ok2)); border:0}
    .card pre{margin:10px 0 0 0;white-space:pre-wrap;line-height:1.35}
    .tiny{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo">S</div>
        <div>
          <div class="title">Spark Ad Studio</div>
          <div class="sub">Uygulama (ÅŸimdilik demo Ã¼retim) â€” n8n sonra</div>
        </div>
      </div>

      <div class="actions">
        <select id="theme">
          <option value="influencer">Influencer</option>
          <option value="oyun">Oyun</option>
          <option value="marka">Marka</option>
          <option value="okul">Okul</option>
        </select>

        <select id="format">
          <option value="ad">Reklam (BaÅŸlÄ±k + AÃ§Ä±klama + CTA)</option>
          <option value="post">Sosyal Post</option>
          <option value="script">15sn Video Metni</option>
        </select>

        <button class="ghost" id="clear">GeÃ§miÅŸi Temizle</button>
        <button class="primary" id="run">ÃœRET</button>
      </div>
    </div>

    <div class="grid">
      <!-- Sol: Girdi -->
      <div class="panel">
        <h2>Paket</h2>
        <div class="muted">Paket seÃ§ince stil daha belirgin olur. (Demo)</div>

        <div class="packs" id="packs">
          <div class="pack free active" data-pack="free" data-credit="5">
            <div class="tag">Free</div>
            <div class="pname">Free</div>
            <div class="pprice">Ãœcretsiz</div>
            <div class="pillrow"><div class="pill">5 kredi (demo)</div><div class="pill">Temel metin</div></div>
          </div>

          <div class="pack inf" data-pack="influencer" data-credit="100">
            <div class="tag">Influencer</div>
            <div class="pname">Influencer</div>
            <div class="pprice">â‚º199 / ay</div>
            <div class="pillrow"><div class="pill">100 kredi (demo)</div><div class="pill">Daha renkli</div></div>
          </div>

          <div class="pack pro" data-pack="pro" data-credit="âˆž">
            <div class="tag">Pro</div>
            <div class="pname">Pro</div>
            <div class="pprice">â‚º699 / ay</div>
            <div class="pillrow"><div class="pill">SÄ±nÄ±rsÄ±z (demo)</div><div class="pill">Daha fazla varyasyon</div></div>
          </div>
        </div>

        <h2 style="margin-top:14px">Åžablonlar (1 tÄ±kla doldur)</h2>
        <div class="templates" id="templates">
          <div class="tpl" data-text="13-14 yaÅŸa hitap eden komik bir oyun reklamÄ± yaz. Oyunun adÄ±: ____ .">
            <b>Oyun ReklamÄ±</b><div class="tiny">GenÃ§, komik, hÄ±zlÄ±</div>
          </div>
          <div class="tpl" data-text="Bir influencer iÃ§in 3 baÅŸlÄ±k + 1 kÄ±sa aÃ§Ä±klama + 1 CTA yaz. ÃœrÃ¼n: ____ .">
            <b>Influencer</b><div class="tiny">IG/TikTok tonu</div>
          </div>
          <div class="tpl" data-text="Bir marka iÃ§in profesyonel reklam metni yaz: ÃœrÃ¼n: ____ . FaydasÄ±: ____ .">
            <b>Marka</b><div class="tiny">GÃ¼ven veren</div>
          </div>
          <div class="tpl" data-text="Okul etkinliÄŸi duyurusu yaz: Etkinlik: ____ . Tarih: ____ . Yer: ____ .">
            <b>Okul</b><div class="tiny">Resmi & net</div>
          </div>
        </div>

        <h2 style="margin-top:14px">Fikrini yaz</h2>
        <textarea id="prompt" placeholder="Fikrini buraya yaz..."></textarea>

        <div class="row" style="margin-top:10px">
          <div class="muted" id="status">HazÄ±r.</div>
        </div>
      </div>

      <!-- SaÄŸ: Ã‡Ä±ktÄ± + GeÃ§miÅŸ -->
      <div class="panel">
        <h2>Ãœretilenler (GeÃ§miÅŸ)</h2>
        <div class="muted">Ãœrettiklerin kart kart burada kalÄ±r. (TarayÄ±cÄ±da saklanÄ±r)</div>

        <div class="cards" id="cards"></div>
      </div>
    </div>
  </div>

<script>
  const $ = (id) => document.getElementById(id);

  // --- Paket seÃ§imi ---
  let selectedPack = "free";
  let creditsLeft = 5;

  const packEls = [...document.querySelectorAll(".pack")];
  function setPack(el){
    packEls.forEach(x => x.classList.remove("active"));
    el.classList.add("active");
    selectedPack = el.dataset.pack;
    creditsLeft = el.dataset.credit === "âˆž" ? Infinity : Number(el.dataset.credit);
    $("status").textContent = `Paket: ${selectedPack} â€¢ Kredi: ${creditsLeft === Infinity ? "SÄ±nÄ±rsÄ±z" : creditsLeft}`;
    saveState();
  }
  packEls.forEach(el => el.addEventListener("click", () => setPack(el)));

  // --- Åžablon tÄ±klayÄ±nca textarea doldur ---
  [...document.querySelectorAll(".tpl")].forEach(tpl => {
    tpl.addEventListener("click", () => {
      $("prompt").value = tpl.dataset.text;
      $("prompt").focus();
    });
  });

  // --- Tema chip class ---
  function themeClass(theme){
    return "theme-" + theme;
  }

  // --- Demo Ã¼retici: paket + tema + format etkisi ---
  function demoGenerate({prompt, theme, format, pack}){
    const tone =
      theme === "oyun" ? "Hype + komik genÃ§ dili" :
      theme === "influencer" ? "IG/TikTok enerjik dili" :
      theme === "marka" ? "GÃ¼ven veren profesyonel" : "Okul/kulÃ¼p resmi dili";

    const extra =
      pack === "free" ? " (temel)" :
      pack === "influencer" ? " (daha renkli + daha net)" :
      " (daha fazla varyasyon + daha gÃ¼Ã§lÃ¼)";

    const addVary = (pack === "pro") ? 3 : (pack === "influencer" ? 2 : 1);

    if(format === "ad"){
      let titles = [];
      for(let i=0;i<addVary;i++){
        titles.push(`- ${prompt.replace("____","")} â€” ÅŸimdi keÅŸfet!`);
      }
      return `ðŸŽ¯ Tema: ${theme} (${tone})\nðŸ“¦ Paket: ${pack}${extra}\n\n1) BaÅŸlÄ±k Ã–nerileri:\n${titles.join("\n")}\n\n2) AÃ§Ä±klama:\n${prompt} iÃ§in hÄ±zlÄ±, net ve dikkat Ã§ekici bir reklam metni. 10 saniyede okut, etki bÄ±rak.\n\n3) CTA:\nHemen dene!`;
    }

    if(format === "post"){
      const hashtags = theme === "oyun" ? "#oyun #gamer #viral" :
                       theme === "influencer" ? "#reels #tiktok #trend" :
                       theme === "marka" ? "#marka #kampanya #urun" : "#okul #duyuru #etkinlik";
      return `ðŸ“£ ${prompt}\n\nðŸ”¥ Ton: ${tone}${extra}\n\n${hashtags} #sparkadstudio`;
    }

    // script
    return `ðŸŽ¬ 15sn Video Metni\nTema: ${theme} â€¢ Paket: ${pack}${extra}\n\nSahne 1: â€œ${prompt}â€ (hÄ±zlÄ± giriÅŸ)\nSahne 2: â€œ1-2 vurucu faydaâ€\nSahne 3: â€œHemen dene!â€`;
  }

  // --- GeÃ§miÅŸ (localStorage) ---
  const LS_KEY = "sparkad_history_v1";
  const LS_STATE = "sparkad_state_v1";

  function loadHistory(){
    try { return JSON.parse(localStorage.getItem(LS_KEY) || "[]"); }
    catch { return []; }
  }
  function saveHistory(items){
    localStorage.setItem(LS_KEY, JSON.stringify(items));
  }

  function loadState(){
    try { return JSON.parse(localStorage.getItem(LS_STATE) || "{}"); }
    catch { return {}; }
  }
  function saveState(){
    localStorage.setItem(LS_STATE, JSON.stringify({
      selectedPack,
      theme: $("theme").value,
      format: $("format").value,
      creditsLeft: creditsLeft === Infinity ? "âˆž" : creditsLeft
    }));
  }

  function render(){
    const items = loadHistory();
    const cards = $("cards");
    cards.innerHTML = "";

    if(items.length === 0){
      cards.innerHTML = `<div class="muted">HenÃ¼z Ã¼retim yok. Soldan fikir yazÄ±p ÃœRETâ€™e bas.</div>`;
      return;
    }

    for(const it of items){
      const el = document.createElement("div");
      el.className = "card";
      el.innerHTML = `
        <div class="cardhead">
          <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
            <span class="chip ${themeClass(it.theme)}">${it.theme}</span>
            <span class="chip">${it.pack}</span>
            <span class="chip">${it.format}</span>
          </div>
          <div class="tiny">${new Date(it.ts).toLocaleString("tr-TR")}</div>
        </div>
        <pre>${it.text}</pre>
      `;
      cards.appendChild(el);
    }
  }

  // Clear
  $("clear").addEventListener("click", () => {
    if(!confirm("GeÃ§miÅŸ temizlensin mi?")) return;
    saveHistory([]);
    render();
  });

  // Run
  $("run").addEventListener("click", async () => {
    const prompt = $("prompt").value.trim();
    if (!prompt) return alert("Ã–nce bir fikir yaz ðŸ™‚");

    if (creditsLeft !== Infinity && creditsLeft <= 0) {
      $("status").textContent = "âŒ Kredi bitti (demo). Paket deÄŸiÅŸtir ya da yarÄ±n dene.";
      return;
    }

    $("run").disabled = true;
    $("status").textContent = "Ãœretiliyor...";

    const theme = $("theme").value;
    const format = $("format").value;

    // Demo Ã¼retim
    const result = demoGenerate({prompt, theme, format, pack: selectedPack});

    if (creditsLeft !== Infinity) creditsLeft -= 1;

    const items = loadHistory();
    items.unshift({ ts: Date.now(), theme, format, pack: selectedPack, text: result });
    saveHistory(items.slice(0, 25)); // en son 25 kayÄ±t
    saveState();

    render();
    $("status").textContent = `Bitti âœ… â€¢ Kalan kredi: ${creditsLeft === Infinity ? "SÄ±nÄ±rsÄ±z" : creditsLeft}`;
    $("run").disabled = false;
  });

  // BaÅŸlangÄ±Ã§ state
  (function init(){
    const st = loadState();
    if(st.theme) $("theme").value = st.theme;
    if(st.format) $("format").value = st.format;

    if(st.selectedPack){
      const el = packEls.find(x => x.dataset.pack === st.selectedPack);
      if(el) setPack(el);
    }else{
      $("status").textContent = `Paket: ${selectedPack} â€¢ Kredi: ${creditsLeft}`;
    }

    render();
  })();
</script>
</body>
</html>
