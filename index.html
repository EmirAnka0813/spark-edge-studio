<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Spark Ad Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #050816;
      --bg-alt: #0b1020;
      --card: #111827;
      --accent: #ff7a3c;
      --accent-soft: #ffd2aa;
      --text: #f9fafb;
      --muted: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.35);
      --radius-lg: 18px;
    }

    * { box-sizing: border-box; margin:0; padding:0; }

    body {
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background: radial-gradient(circle at top,#1f2937 0,#050816 55%,#020617 100%);
      color: var(--text);
      min-height: 100vh;
    }
    body.light {
      --bg:#f3f4f6; --bg-alt:#e5e7eb; --card:#ffffff; --text:#111827; --muted:#6b7280;
      --border-subtle:rgba(148,163,184,.6);
      background: linear-gradient(to bottom,#e5e7eb,#f9fafb);
    }

    a { color:inherit; text-decoration:none; }

    .container { width:min(1100px,92vw); margin:0 auto; }

    header {
      position:sticky; top:0; z-index:40;
      backdrop-filter:blur(18px);
      background:linear-gradient(to bottom,rgba(5,8,22,.95),transparent);
      border-bottom:1px solid rgba(148,163,184,.25);
    }
    body.light header {
      background:linear-gradient(to bottom,rgba(243,244,246,.95),transparent);
      border-bottom-color:rgba(209,213,219,.9);
    }

    .nav {
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 0; gap:16px;
    }
    .nav-left { display:flex; align-items:center; gap:10px; }
    .nav-logo {
      width:40px; height:40px; border-radius:14px;
      background:radial-gradient(circle at 30% 0,var(--accent),#7c2d12);
      display:flex; align-items:center; justify-content:center;
      font-weight:800; font-size:16px; color:#111827;
      box-shadow:0 10px 25px rgba(0,0,0,.6);
    }
    body.light .nav-logo { box-shadow:0 10px 25px rgba(15,23,42,.25); }

    .nav-titles { display:flex; flex-direction:column; gap:2px; }
    .nav-title { font-weight:700; letter-spacing:.03em; font-size:18px; }
    .nav-sub {
      font-size:11px; text-transform:uppercase; letter-spacing:.12em; color:var(--muted);
    }

    .nav-right { display:flex; align-items:center; gap:14px; }
    .nav-links { display:flex; gap:10px; font-size:13px; color:var(--muted); flex-wrap:wrap; }

    .nav-link {
      border:none; background:transparent; color:var(--muted);
      cursor:pointer; padding:4px 6px; border-radius:999px;
    }
    .nav-link:hover { color:var(--accent); }
    .nav-link.active { color:var(--accent); font-weight:600; }

    .nav-cta {
      border:none; cursor:pointer; padding:7px 14px; border-radius:999px;
      font-size:13px; font-weight:600;
      background:linear-gradient(135deg,var(--accent),#fb7185);
      color:#111827; box-shadow:0 12px 28px rgba(0,0,0,.6);
    }
    body.light .nav-cta { box-shadow:0 12px 25px rgba(15,23,42,.25); }

    main { padding-bottom:40px; }
    .screen { display:none; padding:32px 0; }
    .screen.active { display:block; }

    .info-layout {
      display:grid;
      grid-template-columns:minmax(0,1.3fr) minmax(0,1fr);
      gap:24px; align-items:center;
      min-height:calc(100vh - 80px);
    }
    @media (max-width:840px){
      .info-layout{grid-template-columns:1fr; padding-top:20px;}
    }

    .kicker {
      font-size:11px; letter-spacing:.2em; text-transform:uppercase;
      color:var(--accent-soft); display:inline-flex; align-items:center; gap:8px;
      margin-bottom:10px;
    }
    .k-dot{width:7px;height:7px;border-radius:999px;background:var(--accent);}
    .hero-title{font-size:clamp(30px,4vw,36px);font-weight:700;margin-bottom:8px;}
    .hero-title span{
      background:linear-gradient(135deg,var(--accent),#fb7185,#a855f7);
      -webkit-background-clip:text;color:transparent;
    }
    .hero-lead{
      font-size:14px;color:var(--muted);max-width:520px;margin-bottom:18px;
    }
    .pill-row{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:18px;font-size:11px;}
    .pill{
      padding:4px 9px;border-radius:999px;
      border:1px solid var(--border-subtle);
      color:var(--accent-soft);background:rgba(15,23,42,.8);
    }
    body.light .pill{background:#fff;color:#7c2d12;}

    .primary-btn{
      border:none;cursor:pointer;padding:10px 18px;border-radius:999px;
      background:linear-gradient(135deg,var(--accent),#fb7185);
      color:#111827;font-weight:600;font-size:13px;
      box-shadow:0 16px 36px rgba(0,0,0,.6);
    }

    .card{
      background:radial-gradient(circle at top left,rgba(248,250,252,.08),transparent 55%),var(--card);
      border-radius:var(--radius-lg);
      padding:16px 16px 14px;
      border:1px solid var(--border-subtle);
      box-shadow:0 16px 40px rgba(0,0,0,.6);
      font-size:13px;
    }
    body.light .card{box-shadow:0 12px 26px rgba(15,23,42,.18);}

    .auth-wrapper{max-width:420px;margin:0 auto;}
    .auth-title{font-size:20px;text-align:center;margin-bottom:8px;}
    .auth-sub{font-size:13px;color:var(--muted);text-align:center;margin-bottom:18px;}

    .auth-tabs{
      display:flex;background:rgba(15,23,42,.9);padding:3px;border-radius:999px;margin-bottom:12px;
    }
    body.light .auth-tabs{background:rgba(229,231,235,.9);}
    .auth-tab{
      flex:1;text-align:center;padding:6px 0;font-size:13px;border-radius:999px;
      cursor:pointer;color:var(--muted);
    }
    .auth-tab.active{
      background:linear-gradient(135deg,var(--accent),#fb7185);
      color:#111827;font-weight:600;
    }

    .field{display:flex;flex-direction:column;gap:4px;margin-bottom:10px;}
    .field label{font-size:12px;color:var(--muted);}
    .field input,.field textarea,.field select{
      border-radius:10px;border:1px solid rgba(148,163,184,.35);
      padding:8px 10px;font-size:13px;background:rgba(15,23,42,.8);
      color:var(--text);outline:none;
    }
    body.light .field input,body.light .field textarea,body.light .field select{
      background:#f9fafb;color:#111827;border-color:rgba(148,163,184,.6);
    }
    .field textarea{min-height:90px;resize:vertical;}
    .btn-full{width:100%;margin-top:4px;}
    .status-text{font-size:12px;color:var(--accent-soft);min-height:16px;margin-top:6px;}

    .section-title{font-size:20px;margin-bottom:4px;}
    .section-sub{font-size:13px;color:var(--muted);margin-bottom:16px;}

    .notif-list{
      border-radius:14px;border:1px solid var(--border-subtle);
      background:rgba(15,23,42,.9);padding:10px;font-size:13px;
    }
    body.light .notif-list{background:rgba(255,255,255,.9);}
    .notif-item{padding:8px 6px;border-bottom:1px solid rgba(148,163,184,.35);}
    .notif-item:last-child{border-bottom:none;}
    .notif-meta{font-size:11px;color:var(--accent-soft);margin-bottom:2px;}

    .pill-status{
      display:inline-block;padding:2px 7px;border-radius:999px;font-size:10px;margin-left:6px;
    }
    .s-pending{background:rgba(234,179,8,.15);color:#facc15;}
    .s-approved{background:rgba(22,163,74,.2);color:#4ade80;}
    .s-rejected{background:rgba(239,68,68,.18);color:#fca5a5;}

    .grid-two{display:grid;grid-template-columns:minmax(0,1.1fr) minmax(0,1.1fr);gap:16px;}
    @media (max-width:840px){.grid-two{grid-template-columns:1fr;}}

    .grid-three{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;}
    @media (max-width:900px){.grid-three{grid-template-columns:repeat(2,minmax(0,1fr));}}
    @media (max-width:640px){.grid-three{grid-template-columns:1fr;}}

    .admin-layout{display:grid;grid-template-columns:minmax(0,1.1fr) minmax(0,1fr);gap:16px;}
    @media (max-width:960px){.admin-layout{grid-template-columns:1fr;}}

    .admin-list{
      max-height:260px;overflow-y:auto;border-radius:12px;
      border:1px solid var(--border-subtle);padding:8px;font-size:12px;
      background:rgba(15,23,42,.9);
    }
    body.light .admin-list{background:rgba(255,255,255,.9);}
    .admin-item{padding:6px 4px;border-bottom:1px solid rgba(148,163,184,.35);}
    .admin-item:last-child{border-bottom:none;}
    .admin-meta{font-size:11px;color:var(--accent-soft);margin-bottom:2px;}
    .admin-actions{margin-top:4px;display:flex;flex-wrap:wrap;gap:6px;align-items:center;}
    .admin-actions input{flex:1;min-width:90px;font-size:11px;padding:4px 8px;border-radius:999px;}

    .btn-small{
      border:none;border-radius:999px;font-size:11px;padding:4px 9px;cursor:pointer;
    }
    .btn-approve{background:rgba(22,163,74,.9);color:#e5f9ed;}
    .btn-reject{background:rgba(239,68,68,.9);color:#fee2e2;}
    .btn-ghost{
      background:transparent;color:var(--muted);
      border:1px dashed rgba(148,163,184,.6);
    }

    .stats-grid{
      display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin-bottom:10px;
    }
    @media (max-width:840px){.stats-grid{grid-template-columns:repeat(2,minmax(0,1fr));}}
    .stat-card{
      padding:8px 10px;border-radius:12px;background:rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.4);font-size:12px;
    }
    .stat-label{color:var(--muted);font-size:11px;}
    .stat-value{font-size:18px;font-weight:600;}

    .feed-post{padding:8px 6px;border-bottom:1px solid rgba(148,163,184,.3);}
    .feed-post:last-child{border-bottom:none;}

    .assistant-chat{
      border-radius:14px;border:1px solid var(--border-subtle);
      background:rgba(15,23,42,.9);padding:10px;max-height:320px;overflow-y:auto;font-size:13px;
    }
    body.light .assistant-chat{background:rgba(255,255,255,.9);}
    .chat-row{margin-bottom:8px;}
    .chat-row.me{text-align:right;}
    .chat-bubble{
      display:inline-block;padding:6px 10px;border-radius:999px;
      max-width:80%;text-align:left;
    }
    .chat-row.me .chat-bubble{
      background:linear-gradient(135deg,var(--accent),#fb7185);
      color:#111827;border-bottom-right-radius:4px;
    }
    .chat-row.ai .chat-bubble{
      background:rgba(15,23,42,.9);border:1px solid var(--border-subtle);
      border-bottom-left-radius:4px;
    }

    footer{padding:18px 0 28px;font-size:12px;color:var(--muted);}
    footer .row{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;}
  </style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="nav-left">
      <div class="nav-logo">SA</div>
      <div class="nav-titles">
        <div class="nav-title">Spark Ad Studio</div>
        <div class="nav-sub">mini reklam stÃ¼dyosu</div>
      </div>
    </div>
    <div class="nav-right">
      <div class="nav-links" id="nav-links" style="display:none;">
        <button class="nav-link active" data-target="info" id="nav-info">Bilgi</button>
        <button class="nav-link" data-target="main" id="nav-main">Ana Sayfa</button>
        <button class="nav-link" data-target="studio" id="nav-studio">StÃ¼dyo</button>
        <button class="nav-link" data-target="community" id="nav-community">Topluluk</button>
        <button class="nav-link" data-target="assistant" id="nav-assistant">Asistan</button>
        <button class="nav-link" data-target="pricing" id="nav-pricing">FiyatlandÄ±rma</button>
        <button class="nav-link" data-target="settings" id="nav-settings">Ayarlar</button>
        <button class="nav-link" data-target="admin" id="nav-admin" style="display:none;">YÃ¶netici</button>
      </div>
      <button class="nav-cta" id="btn-auth">Ãœye Ol / GiriÅŸ Yap</button>
    </div>
  </div>
</header>

<main>
  <div class="container">
    <!-- LANDING -->
    <section class="screen active" id="screen-info">
      <div class="info-layout">
        <div>
          <div class="kicker"><span class="k-dot"></span> KULÃœPLER VE MARKALAR Ä°Ã‡Ä°N MÄ°NÄ° STÃœDYO</div>
          <h1 class="hero-title">
            <span>Spark Ad Studio</span> kulÃ¼pler ve markalar iÃ§in akÄ±lda kalÄ±cÄ± reklam fikirleri Ã¼retir.
          </h1>
          <p class="hero-lead">
            KulÃ¼pler, okullar ve kÃ¼Ã§Ã¼k markalar iÃ§in basit bir panelden reklam fikri, slogan, kampanya
            ve iletiÅŸim taslaklarÄ± Ã¼retmeni saÄŸlar. Sen fikri verirsin, onlar seni duyurur.
          </p>
          <div class="pill-row">
            <span class="pill">ğŸ¯ KulÃ¼bÃ¼ne Ã¶zel reklam stratejisi</span>
            <span class="pill">ğŸ¤ KarÅŸÄ±lÄ±klÄ± tanÄ±tÄ±m modeli</span>
            <span class="pill">ğŸ§  AkÄ±llÄ± Asistan ile fikir Ã¼retimi</span>
            <span class="pill">ğŸ“Š YÃ¶netici paneli ve istatistikler</span>
          </div>
          <button class="primary-btn" id="btn-info-start">Hemen BaÅŸla (Ãœye Ol / GiriÅŸ Yap)</button>
        </div>
        <div class="card">
          <h3>Sistem NasÄ±l Ã‡alÄ±ÅŸÄ±r?</h3>
          <p style="color:var(--muted);font-size:13px;">
            â€¢ KulÃ¼p/marka hesabÄ± aÃ§arsÄ±n.<br>
            â€¢ Kredi paketleri veya Spark Pro / Influencer gibi abonelikler alÄ±rsÄ±n.<br>
            â€¢ Reklam isteÄŸi formunu doldurursun, yÃ¶netici paneline dÃ¼ÅŸer.<br>
            â€¢ YÃ¶netici isteÄŸi onaylar, mesajla geri bildirim verir.<br>
            â€¢ Topluluk alanÄ±nda fikirlerini paylaÅŸÄ±r, asistanla senaryo Ã¼retebilirsin.
          </p>
        </div>
      </div>
    </section>

    <!-- AUTH -->
    <section class="screen" id="screen-auth">
      <div class="auth-wrapper">
        <div class="auth-title">HesabÄ±na giriÅŸ yap veya yeni bir hesap oluÅŸtur</div>
        <div class="auth-sub">
          HesabÄ±nla giriÅŸ yapabilir veya yeni Ã¼yelik oluÅŸturup stÃ¼dyoyu kullanmaya baÅŸlayabilirsin.
        </div>
        <div class="card">
          <div class="auth-tabs">
            <div class="auth-tab active" id="tab-login">GiriÅŸ Yap</div>
            <div class="auth-tab" id="tab-register">Ãœye Ol</div>
          </div>

          <div id="auth-login">
            <div class="field">
              <label for="login-email">E-posta veya kullanÄ±cÄ± adÄ±</label>
              <input id="login-email" type="text" placeholder="Ã¶r: seninmailin@mail.com" />
            </div>
            <div class="field">
              <label for="login-pass">Åifre</label>
              <input id="login-pass" type="password" placeholder="ÅŸifren" />
            </div>
            <button class="primary-btn btn-full" id="btn-login">GiriÅŸ Yap</button>
            <div class="status-text" id="status-login"></div>
          </div>

          <div id="auth-register" style="display:none;">
            <div class="field">
              <label for="reg-name">AdÄ±n</label>
              <input id="reg-name" type="text" placeholder="AdÄ±nÄ± yaz" />
            </div>
            <div class="field">
              <label for="reg-email">E-posta</label>
              <input id="reg-email" type="email" placeholder="ornek@mail.com" />
            </div>
            <div class="field">
              <label for="reg-pass">Åifre</label>
              <input id="reg-pass" type="password" placeholder="Bir ÅŸifre belirle" />
            </div>
            <button class="primary-btn btn-full" id="btn-register">Ãœye Ol ve GiriÅŸ Yap</button>
            <div class="status-text" id="status-register"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- MAIN -->
    <section class="screen" id="screen-main">
      <div style="margin-bottom:16px;">
        <div style="font-size:14px;color:var(--accent-soft);" id="welcome-text"></div>
      </div>
      <h2 class="section-title">Bildirimler</h2>
      <p class="section-sub">
        Reklam isteklerinin durumu, satÄ±n almalar ve yÃ¶netici yanÄ±tlarÄ± burada.
      </p>
      <div class="notif-list" id="notif-list"></div>
    </section>

    <!-- STUDIO -->
    <section class="screen" id="screen-studio">
      <h2 class="section-title">StÃ¼dyo</h2>
      <p class="section-sub">
        Profilin, reklam istekleri ve yÃ¶netici ile mesajlaÅŸma alanÄ±n.
      </p>

      <div class="grid-two">
        <div class="card">
          <h3>Profil Bilgilerin</h3>
          <p id="profile-info" style="font-size:13px;color:var(--muted);margin-top:8px;"></p>
        </div>

        <div class="card">
          <h3>StÃ¼dyo Ã–zeti</h3>
          <p style="font-size:13px;color:var(--muted);">
            â€¢ Kredi paketleri ve abonelikler: <strong>FiyatlandÄ±rma</strong> menÃ¼sÃ¼nde.<br>
            â€¢ Her reklam isteÄŸi 1 kredi tÃ¼ketir.<br>
            â€¢ Spark Pro ve Influencer aboneliklerinde isteklere Ã¶ncelik verilir.<br>
          </p>
        </div>

        <div class="card" id="card-ads">
          <h3>Reklam Ä°steÄŸi GÃ¶nder</h3>
          <p style="font-size:12px;color:var(--muted);margin-bottom:8px;">
            Reklam istediÄŸin kulÃ¼p/marka, Ã¼rÃ¼n ve hedef kitleyi kÄ±saca anlat.
          </p>
          <div class="field">
            <label for="ad-brand">KulÃ¼p / Marka</label>
            <input id="ad-brand" type="text" placeholder="Ã–rn: X Spor KulÃ¼bÃ¼" />
          </div>
          <div class="field">
            <label for="ad-product">ÃœrÃ¼n / Kampanya</label>
            <input id="ad-product" type="text" placeholder="Ã–rn: yeni forma lansmanÄ±" />
          </div>
          <div class="field">
            <label for="ad-desc">Detay</label>
            <textarea id="ad-desc" placeholder="Hedef kitle, platform, tarz (komik, ciddi, vb.)"></textarea>
          </div>
          <button class="primary-btn btn-full" id="btn-send-ad">Reklam Ä°steÄŸini GÃ¶nder (1 kredi)</button>
          <div class="status-text" id="status-ad"></div>
        </div>

        <div class="card">
          <h3>YÃ¶neticiye Mesaj GÃ¶nder</h3>
          <div class="field">
            <label for="msg-subject">Konu</label>
            <input id="msg-subject" type="text" placeholder="Konu baÅŸlÄ±ÄŸÄ±" />
          </div>
          <div class="field">
            <label for="msg-body">Mesaj</label>
            <textarea id="msg-body" placeholder="MesajÄ±nÄ± buraya yaz..."></textarea>
          </div>
          <button class="primary-btn btn-full" id="btn-send-msg">MesajÄ± GÃ¶nder</button>
          <div class="status-text" id="status-msg"></div>
        </div>

        <div class="card">
          <h3>YÃ¶netici YanÄ±tlarÄ±</h3>
          <div class="notif-list" id="user-messages-list" style="max-height:220px;overflow-y:auto;"></div>
        </div>

        <div class="card">
          <h3>Not</h3>
          <p style="font-size:13px;color:var(--muted);">
            Bu stÃ¼dyo eÄŸitim amaÃ§lÄ±dÄ±r. Ã–deme iÅŸlemleri simÃ¼lasyon olarak Firestore Ã¼zerinde tutulur.
          </p>
        </div>
      </div>
    </section>

    <!-- ASSISTANT -->
    <section class="screen" id="screen-assistant">
      <h2 class="section-title">AI Reklam AsistanÄ±</h2>
      <p class="section-sub">
        KulÃ¼bÃ¼n, okulun veya markan iÃ§in â€œNasÄ±l bir reklam yapabiliriz?â€ gibi sorular sor.
        Asistan, hazÄ±r ÅŸablonlarla akÄ±llÄ± Ã¶neriler Ã¼retir.
      </p>
      <div class="grid-two">
        <div class="card">
          <h3>Sohbet</h3>
          <div class="assistant-chat" id="assistant-chat"></div>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <input id="assistant-input" type="text"
                   placeholder="Ã–rn: Basketbol kulÃ¼bÃ¼mÃ¼z iÃ§in TikTok reklamÄ± fikri verir misin?"
                   style="flex:1;padding:8px 10px;border-radius:999px;border:1px solid var(--border-subtle);
                          background:rgba(15,23,42,.9);color:var(--text);font-size:13px;">
            <button class="primary-btn" id="assistant-send" style="padding:8px 14px;font-size:12px;">GÃ¶nder</button>
          </div>
          <div style="font-size:11px;color:var(--muted);margin-top:6px;">
            Not: Bu asistan tarayÄ±cÄ± iÃ§inde hazÄ±r kurallarla Ã§alÄ±ÅŸÄ±r, internetten veri Ã§ekmez.
          </div>
        </div>
        <div class="card">
          <h3>HazÄ±r Sorular</h3>
          <ul style="font-size:13px;color:var(--muted);padding-left:16px;line-height:1.6;">
            <li>â€œBizim futbol kulÃ¼bÃ¼ iÃ§in Instagramâ€™da nasÄ±l reklam yapabiliriz?â€</li>
            <li>â€œOkulumuzun bilim ÅŸenliÄŸi iÃ§in akÄ±lda kalÄ±cÄ± bir slogan Ã¶nerir misin?â€</li>
            <li>â€œKahve dÃ¼kkanÄ±mÄ±z iÃ§in esprili bir kampanya fikri verir misin?â€</li>
            <li>â€œYeni aÃ§tÄ±ÄŸÄ±mÄ±z YouTube kanalÄ± iÃ§in tanÄ±tÄ±m videosu fikri Ã¼retir misin?â€</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- COMMUNITY -->
    <section class="screen" id="screen-community">
      <h2 class="section-title">Topluluk AkÄ±ÅŸÄ±</h2>
      <p class="section-sub">
        ÃœrettiÄŸin fikirleri, senaryolarÄ± veya Ã¶rnek projelerini paylaÅŸ.
      </p>
      <div class="grid-two">
        <div class="card">
          <h3>Yeni GÃ¶nderi OluÅŸtur</h3>
          <div class="field">
            <label for="post-title">BaÅŸlÄ±k</label>
            <input id="post-title" type="text" placeholder="Ã–rn: X KulÃ¼bÃ¼ iÃ§in komik senaryo" />
          </div>
          <div class="field">
            <label for="post-text">GÃ¶nderi Metni</label>
            <textarea id="post-text" placeholder="Fikrini, senaryonu veya Ã¶nerini buraya yaz..."></textarea>
          </div>
          <div class="field">
            <label for="post-link">Ä°steÄŸe BaÄŸlÄ± BaÄŸlantÄ± (YouTube, Drive vb.)</label>
            <input id="post-link" type="text" placeholder="https://..." />
          </div>
          <button class="primary-btn btn-full" id="btn-post">GÃ¶nderiyi PaylaÅŸ</button>
          <div class="status-text" id="status-post"></div>
        </div>
        <div class="card">
          <h3>Topluluk GÃ¶nderileri</h3>
          <div class="notif-list" id="feed-list" style="max-height:320px;overflow-y:auto;"></div>
        </div>
      </div>
    </section>

    <!-- PRICING -->
    <section class="screen" id="screen-pricing">
      <h2 class="section-title">FiyatlandÄ±rma</h2>
      <p class="section-sub">
        Spark Free ile baÅŸla, kredi paketleriyle isteÄŸe baÄŸlÄ± kredi al veya Spark Pro / Influencer abonelikleriyle
        daha fazla destek al. Fiyatlar TL Ã¼zerinden tanÄ±mlanÄ±r, sistem otomatik USD ve EUR hesaplar.
      </p>
      <div class="grid-two">
        <div class="card">
          <h3>SatÄ±n Alma</h3>
          <p style="font-size:12px;color:var(--muted);margin-bottom:8px;">
            AÅŸaÄŸÄ±dan kredi paketlerini ve abonelikleri gÃ¶rebilirsin. SatÄ±n alma demo amaÃ§lÄ±dÄ±r;
            Firestoreâ€™a kayÄ±t bÄ±rakÄ±lÄ±r ve kredin artar.
          </p>
          <div id="plans-list"></div>
          <div class="status-text" id="status-plans"></div>
        </div>
        <div class="card" id="pricing-list"></div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="screen" id="screen-settings">
      <h2 class="section-title">Ayarlar</h2>
      <p class="section-sub">
        Tema, vurgu rengi ve dil ayarlarÄ±nÄ± buradan deÄŸiÅŸtirebilirsin.
      </p>
      <div class="card" style="max-width:420px;">
        <div class="field">
          <label for="theme-select">Tema</label>
          <select id="theme-select">
            <option value="dark">Koyu Tema (VarsayÄ±lan)</option>
            <option value="light">AÃ§Ä±k Tema</option>
          </select>
        </div>
        <div class="field">
          <label for="accent-select">Vurgu Rengi</label>
          <select id="accent-select">
            <option value="orange">Turuncu</option>
            <option value="blue">Mavi</option>
            <option value="green">YeÅŸil</option>
            <option value="purple">Mor</option>
          </select>
        </div>
        <div class="field">
          <label for="lang-select">Dil (fiyat gÃ¶sterimi)</label>
          <select id="lang-select">
            <option value="tr">TÃ¼rkÃ§e â€“ TL</option>
            <option value="en">English â€“ USD</option>
            <option value="de">Deutsch â€“ EUR</option>
          </select>
        </div>
        <p style="font-size:12px;color:var(--muted);">
          Dil, paketlerde hangi para biriminin Ã¶ncelikli gÃ¶sterileceÄŸini belirler:
          TÃ¼rkÃ§e â†’ â‚º, English â†’ $, Deutsch â†’ â‚¬.
        </p>
      </div>
    </section>

    <!-- ADMIN -->
    <section class="screen" id="screen-admin">
      <div style="margin-bottom:14px;font-size:14px;color:var(--accent-soft);">
        YÃ¶netici paneline hoÅŸ geldin ğŸ‘‘
      </div>
      <h2 class="section-title">Genel GÃ¶rÃ¼nÃ¼m</h2>
      <p class="section-sub">
        Buradan reklam istekleri, mesajlar, paketler, abonelikler, Ã¼yeler ve topluluk paylaÅŸÄ±mlarÄ±nÄ± yÃ¶netebilirsin.
      </p>

      <div class="card" style="margin-bottom:16px;">
        <h3>Ä°statistikler</h3>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Toplam Ãœye</div>
            <div class="stat-value" id="stat-users">-</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Reklam Ä°steÄŸi</div>
            <div class="stat-value" id="stat-requests">-</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">SatÄ±n Alma</div>
            <div class="stat-value" id="stat-purchases">-</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Mesaj</div>
            <div class="stat-value" id="stat-messages">-</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Topluluk GÃ¶nderisi</div>
            <div class="stat-value" id="stat-posts">-</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Paket / Abonelik</div>
            <div class="stat-value" id="stat-plans">-</div>
          </div>
        </div>
      </div>

      <div class="admin-layout">
        <div>
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;">
              <h3>Reklam Ä°stekleri</h3>
              <button class="btn-small btn-ghost" id="btn-clear-requests">GeÃ§miÅŸi Sil</button>
            </div>
            <div class="admin-list" id="admin-requests"></div>
          </div>

          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;">
              <h3>KullanÄ±cÄ± MesajlarÄ±</h3>
              <button class="btn-small btn-ghost" id="btn-clear-messages">GeÃ§miÅŸi Sil</button>
            </div>
            <div class="admin-list" id="admin-messages"></div>
          </div>

          <div class="card">
            <h3>Topluluk GÃ¶nderileri</h3>
            <div class="admin-list" id="admin-posts"></div>
          </div>
        </div>

        <div>
          <div class="card">
            <h3>Ãœyeler</h3>
            <div class="admin-list" id="admin-users"></div>
          </div>

          <div class="card">
            <h3>Paket / Abonelik FiyatlandÄ±rma</h3>
            <div class="admin-list" id="admin-plans"></div>
            <div style="margin-top:8px;">
              <h4 style="font-size:13px;margin-bottom:4px;">Yeni Paket / Abonelik Ekle</h4>
              <div class="field">
                <label for="new-plan-name">AdÄ± (Ã–rn: Spark Pro)</label>
                <input id="new-plan-name" type="text" placeholder="Ã–rn: Spark Pro" />
              </div>
              <div class="field">
                <label for="new-plan-type">TÃ¼r</label>
                <select id="new-plan-type">
                  <option value="credits">Kredi Paketi</option>
                  <option value="subscription">Abonelik</option>
                </select>
              </div>
              <div class="field">
                <label for="new-plan-credits">Kredi (istersen 0 bÄ±rak)</label>
                <input id="new-plan-credits" type="number" min="0" value="0" />
              </div>
              <div class="field">
                <label for="new-plan-tl">Fiyat (TL)</label>
                <input id="new-plan-tl" type="number" min="0" value="1450" />
              </div>
              <button class="btn-small btn-approve" id="btn-add-plan">Paket / Abonelik Ekle</button>
              <div class="status-text" id="status-add-plan"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

  </div>
</main>

<footer>
  <div class="container row">
    <span>Â© <span id="year"></span> Spark Ad Studio</span>
  </div>
</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import {
    getFirestore,
    collection,
    addDoc,
    getDocs,
    onSnapshot,
    doc,
    updateDoc,
    setDoc,
    deleteDoc
  } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDc6kmOfcRwWLFxPAKOqtB5w_QJkTdHqh8",
    authDomain: "spark-ad-studio.firebaseapp.com",
    projectId: "spark-ad-studio",
    storageBucket: "spark-ad-studio.firebasestorage.app",
    messagingSenderId: "91249468928",
    appId: "1:91249468928:web:6661ecd7e1ff1e92c41ae5",
    measurementId: "G-JW6S3PGH98"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const USD_RATE = 42.45;
  const EUR_RATE = 49.60;

  let currentUser = null;
  let currentLang = "tr";
  let plans = [];

  const screens = {
    info: document.getElementById("screen-info"),
    auth: document.getElementById("screen-auth"),
    main: document.getElementById("screen-main"),
    studio: document.getElementById("screen-studio"),
    assistant: document.getElementById("screen-assistant"),
    community: document.getElementById("screen-community"),
    pricing: document.getElementById("screen-pricing"),
    settings: document.getElementById("screen-settings"),
    admin: document.getElementById("screen-admin")
  };

  const navLinksContainer = document.getElementById("nav-links");
  const navAdmin = document.getElementById("nav-admin");
  const navInfo = document.getElementById("nav-info");
  const btnAuth = document.getElementById("btn-auth");
  const welcomeText = document.getElementById("welcome-text");
  const profileInfo = document.getElementById("profile-info");
  const notifList = document.getElementById("notif-list");
  const userMessagesList = document.getElementById("user-messages-list");
  const plansList = document.getElementById("plans-list");
  const statusPlans = document.getElementById("status-plans");
  const pricingList = document.getElementById("pricing-list");
  const yearSpan = document.getElementById("year");
  yearSpan.textContent = new Date().getFullYear();

  const statusLogin = document.getElementById("status-login");
  const statusRegister = document.getElementById("status-register");
  const statusAd = document.getElementById("status-ad");
  const statusMsg = document.getElementById("status-msg");
  const statusPost = document.getElementById("status-post");
  const statusAddPlan = document.getElementById("status-add-plan");

  const adminRequestsBox = document.getElementById("admin-requests");
  const adminMessagesBox = document.getElementById("admin-messages");
  const adminUsersBox = document.getElementById("admin-users");
  const adminPlansBox = document.getElementById("admin-plans");
  const adminPostsBox = document.getElementById("admin-posts");
  const feedList = document.getElementById("feed-list");

  const statsEls = {
    users: document.getElementById("stat-users"),
    requests: document.getElementById("stat-requests"),
    purchases: document.getElementById("stat-purchases"),
    messages: document.getElementById("stat-messages"),
    posts: document.getElementById("stat-posts"),
    plans: document.getElementById("stat-plans")
  };

  const assistantChat = document.getElementById("assistant-chat");
  const assistantInput = document.getElementById("assistant-input");
  const assistantSend = document.getElementById("assistant-send");

  function setActiveScreen(key) {
    Object.values(screens).forEach(el => el.classList.remove("active"));
    if (screens[key]) screens[key].classList.add("active");
    document.querySelectorAll(".nav-link").forEach(btn => {
      btn.classList.toggle("active", btn.dataset.target === key);
    });
  }

  function updateStudioAccess() {
    const cardAds = document.getElementById("card-ads");
    if (!cardAds) return;
    if (currentUser && currentUser.role === "user" && (currentUser.credits || 0) > 0) {
      cardAds.style.display = "block";
    } else {
      cardAds.style.display = "none";
    }
  }

  function updateHeaderState() {
    if (!currentUser) {
      navLinksContainer.style.display = "none";
      btnAuth.textContent = "Ãœye Ol / GiriÅŸ Yap";
      navInfo.style.display = "inline-block";
    } else {
      navLinksContainer.style.display = "flex";
      btnAuth.textContent = "Ã‡Ä±kÄ±ÅŸ Yap";
      navInfo.style.display = "none";
    }
    if (currentUser && currentUser.role === "admin") {
      navAdmin.style.display = "inline-block";
    } else {
      navAdmin.style.display = "none";
    }
    updateStudioAccess();
  }

  function applyAccent(key) {
    let accent = "#ff7a3c", soft = "#ffd2aa";
    if (key === "blue") { accent="#3b82f6"; soft="#bfdbfe"; }
    else if (key === "green") { accent="#22c55e"; soft="#bbf7d0"; }
    else if (key === "purple") { accent="#a855f7"; soft="#e9d5ff"; }
    document.documentElement.style.setProperty("--accent", accent);
    document.documentElement.style.setProperty("--accent-soft", soft);
  }

  function applyThemeAndLangFromStorage() {
    const theme = localStorage.getItem("spark_theme") || "dark";
    const accent = localStorage.getItem("spark_accent") || "orange";
    currentLang = localStorage.getItem("spark_lang") || "tr";

    document.getElementById("theme-select").value = theme;
    document.getElementById("accent-select").value = accent;
    document.getElementById("lang-select").value = currentLang;

    if (theme === "light") document.body.classList.add("light");
    else document.body.classList.remove("light");

    applyAccent(accent);
    renderPlansUI();
    renderPricingUI();
  }

  document.getElementById("theme-select").addEventListener("change", () => {
    const v = document.getElementById("theme-select").value;
    localStorage.setItem("spark_theme", v);
    applyThemeAndLangFromStorage();
  });
  document.getElementById("accent-select").addEventListener("change", () => {
    const v = document.getElementById("accent-select").value;
    localStorage.setItem("spark_accent", v);
    applyThemeAndLangFromStorage();
  });
  document.getElementById("lang-select").addEventListener("change", () => {
    currentLang = document.getElementById("lang-select").value;
    localStorage.setItem("spark_lang", currentLang);
    renderPlansUI();
    renderPricingUI();
  });
  applyThemeAndLangFromStorage();

  document.getElementById("tab-login").addEventListener("click", () => {
    document.getElementById("tab-login").classList.add("active");
    document.getElementById("tab-register").classList.remove("active");
    document.getElementById("auth-login").style.display = "block";
    document.getElementById("auth-register").style.display = "none";
  });
  document.getElementById("tab-register").addEventListener("click", () => {
    document.getElementById("tab-login").classList.remove("active");
    document.getElementById("tab-register").classList.add("active");
    document.getElementById("auth-login").style.display = "none";
    document.getElementById("auth-register").style.display = "block";
  });

  document.getElementById("btn-info-start").addEventListener("click", () => {
    setActiveScreen("auth");
  });

  btnAuth.addEventListener("click", () => {
    if (!currentUser) {
      setActiveScreen("auth");
    } else {
      currentUser = null;
      localStorage.removeItem("spark_current_user");
      updateHeaderState();
      setActiveScreen("info");
      notifList.innerHTML = "";
      profileInfo.textContent = "";
      userMessagesList.innerHTML = "";
    }
  });

  document.querySelectorAll(".nav-link").forEach(btn => {
    btn.addEventListener("click", () => {
      const target = btn.dataset.target;
      if (!currentUser && target !== "info" && target !== "auth") {
        setActiveScreen("auth");
        return;
      }
      if (target === "admin" && (!currentUser || currentUser.role !== "admin")) {
        setActiveScreen("main");
        return;
      }
      setActiveScreen(target);
      if (target === "main" && currentUser && currentUser.role === "user") {
        loadNotificationsForUser();
      }
      if (target === "studio" && currentUser && currentUser.role === "user") {
        renderProfile();
        loadUserReplies();
      }
      if (target === "pricing") {
        renderPlansUI();
        renderPricingUI();
      }
      if (target === "community") {
        loadFeed();
      }
      if (target === "admin" && currentUser && currentUser.role === "admin") {
        refreshStats();
        renderAdminPlans();
      }
    });
  });

  document.getElementById("btn-register").addEventListener("click", async () => {
    statusRegister.textContent = "";
    const name = document.getElementById("reg-name").value.trim();
    const email = document.getElementById("reg-email").value.trim();
    const pass = document.getElementById("reg-pass").value.trim();
    if (!name || !email || !pass) {
      statusRegister.textContent = "LÃ¼tfen tÃ¼m alanlarÄ± doldur.";
      return;
    }
    try {
      const usersRef = collection(db, "users");
      const snap = await getDocs(usersRef);
      let exists = false;
      snap.forEach(d => { if (d.data().email === email) exists = true; });
      if (exists) {
        statusRegister.textContent = "Bu e-posta zaten kayÄ±tlÄ±.";
        return;
      }
      const now = new Date().toLocaleString("tr-TR");
      const docRef = await addDoc(usersRef, {
        name, email, pass,
        role: "user",
        createdAt: now,
        lastLogin: now,
        credits: 0
      });
      currentUser = { id: docRef.id, name, email, role:"user", createdAt:now, lastLogin:now, credits:0 };
      localStorage.setItem("spark_current_user", JSON.stringify(currentUser));
      updateHeaderState();
      welcomeText.textContent = `HoÅŸ geldin, ${currentUser.name} ğŸ‘‹`;
      renderProfile();
      loadNotificationsForUser();
      setActiveScreen("main");
    } catch (e) {
      console.error(e);
      statusRegister.textContent = "KayÄ±t sÄ±rasÄ±nda hata oluÅŸtu (Rules ayarlarÄ±nÄ± kontrol et).";
    }
  });

  document.getElementById("btn-login").addEventListener("click", async () => {
    statusLogin.textContent = "";
    const loginVal = document.getElementById("login-email").value.trim();
    const pass = document.getElementById("login-pass").value.trim();
    if (!loginVal || !pass) {
      statusLogin.textContent = "LÃ¼tfen kullanÄ±cÄ± adÄ±/e-posta ve ÅŸifre gir.";
      return;
    }

    if (loginVal === "admin" && pass === "spark123") {
      currentUser = {
        id: "ADMIN",
        name: "YÃ¶netici",
        email: "admin@sparkad.studio",
        role: "admin",
        credits: 0
      };
      localStorage.setItem("spark_current_user", JSON.stringify(currentUser));
      statusLogin.textContent = "YÃ¶netici olarak giriÅŸ yapÄ±ldÄ±.";
      updateHeaderState();
      renderAdminPlans();
      refreshStats();
      setActiveScreen("admin");
      return;
    }

    try {
      const usersRef = collection(db, "users");
      const snap = await getDocs(usersRef);
      let found = null;
      snap.forEach(d => {
        const u = d.data();
        if ((u.email === loginVal || u.name === loginVal) && u.pass === pass) {
          found = { id: d.id, ...u };
        }
      });
      if (!found) {
        statusLogin.textContent = "KullanÄ±cÄ± bulunamadÄ± veya ÅŸifre hatalÄ±.";
        return;
      }
      const now = new Date().toLocaleString("tr-TR");
      try { await updateDoc(doc(db, "users", found.id), { lastLogin: now }); } catch(e){}
      found.lastLogin = now;
      found.credits = found.credits || 0;
      currentUser = found;
      localStorage.setItem("spark_current_user", JSON.stringify(currentUser));
      updateHeaderState();
      if (currentUser.role === "admin") {
        renderAdminPlans();
        refreshStats();
        setActiveScreen("admin");
      } else {
        welcomeText.textContent = `HoÅŸ geldin, ${currentUser.name} ğŸ‘‹`;
        renderProfile();
        loadNotificationsForUser();
        loadUserReplies();
        setActiveScreen("main");
      }
    } catch (e) {
      console.error(e);
      statusLogin.textContent = "GiriÅŸ sÄ±rasÄ±nda bir hata oluÅŸtu.";
    }
  });

  const savedUser = localStorage.getItem("spark_current_user");
  if (savedUser) {
    try {
      currentUser = JSON.parse(savedUser);
      updateHeaderState();
      if (currentUser.role === "admin") {
        setActiveScreen("admin");
        renderAdminPlans();
        refreshStats();
      } else {
        welcomeText.textContent = `HoÅŸ geldin, ${currentUser.name} ğŸ‘‹`;
        renderProfile();
        loadNotificationsForUser();
        setActiveScreen("main");
      }
    } catch(e){ currentUser = null; }
  }

  function renderProfile() {
    if (!currentUser || currentUser.role !== "user") return;
    profileInfo.innerHTML =
      `<strong>Ad:</strong> ${currentUser.name}<br>` +
      `<strong>E-posta:</strong> ${currentUser.email}<br>` +
      `<strong>Ãœyelik Tarihi:</strong> ${currentUser.createdAt || "-"}<br>` +
      `<strong>Son GiriÅŸ:</strong> ${currentUser.lastLogin || "-"}<br>` +
      `<strong>Kredi:</strong> ${currentUser.credits || 0}`;
    updateStudioAccess();
  }

  async function loadNotificationsForUser() {
    if (!currentUser || currentUser.role !== "user") return;
    notifList.innerHTML = "YÃ¼kleniyor...";
    const items = [];
    try {
      const reqSnap = await getDocs(collection(db,"requests"));
      reqSnap.forEach(d => {
        const r = d.data();
        if (r.userId === currentUser.id) {
          items.push({
            type:"request",
            createdAt:r.createdAt,
            status:r.status || "pending",
            text:`Reklam isteÄŸin: ${r.brand || "-"} / ${r.product || "-"}`,
            adminNote:r.adminNote || ""
          });
        }
      });
      const purSnap = await getDocs(collection(db,"purchases"));
      purSnap.forEach(d => {
        const p = d.data();
        if (p.userId === currentUser.id) {
          items.push({
            type:"purchase",
            createdAt:p.createdAt,
            status:"done",
            text:`${p.planName} satÄ±n alÄ±ndÄ± (${p.priceTL}â‚º)`,
            adminNote:""
          });
        }
      });
      const msgSnap = await getDocs(collection(db,"messages"));
      msgSnap.forEach(d => {
        const m = d.data();
        if (m.userId === currentUser.id && m.adminReply) {
          items.push({
            type:"msg",
            createdAt:m.adminRepliedAt || m.createdAt,
            status:"reply",
            text:`MesajÄ±na yÃ¶netici yanÄ±tÄ±: ${m.subject || "-"}`,
            adminNote:m.adminReply
          });
        }
      });
      items.sort((a,b)=> (b.createdAt||"").localeCompare(a.createdAt||""));
      if (!items.length) {
        notifList.innerHTML = "<div class='notif-item'>HenÃ¼z bildirimin yok.</div>";
        return;
      }
      notifList.innerHTML = items.map(i=>{
        let statusHtml="";
        if (i.type==="request"){
          if (i.status==="approved") statusHtml="<span class='pill-status s-approved'>OnaylandÄ±</span>";
          else if (i.status==="rejected") statusHtml="<span class='pill-status s-rejected'>Reddedildi</span>";
          else statusHtml="<span class='pill-status s-pending'>Beklemede</span>";
        } else if (i.type==="purchase"){
          statusHtml="<span class='pill-status s-approved'>SatÄ±n alma</span>";
        } else if (i.type==="msg"){
          statusHtml="<span class='pill-status s-approved'>YanÄ±tlandÄ±</span>";
        }
        return `<div class="notif-item">
          <div class="notif-meta">${i.createdAt || ""} ${statusHtml}</div>
          <div>${i.text}</div>
          ${i.adminNote ? `<div style="font-size:12px;color:var(--muted);margin-top:4px;">YÃ¶netici notu: ${i.adminNote}</div>`:""}
        </div>`;
      }).join("");
    } catch(e){
      console.error(e);
      notifList.innerHTML="<div class='notif-item'>Bildirimler yÃ¼klenemedi.</div>";
    }
  }

  async function loadUserReplies() {
    if (!currentUser || currentUser.role !== "user") return;
    userMessagesList.innerHTML = "";
    const snap = await getDocs(collection(db,"messages"));
    const arr = [];
    snap.forEach(d=>{
      const m = d.data();
      if (m.userId === currentUser.id && m.adminReply){
        arr.push(m);
      }
    });
    arr.sort((a,b)=>(b.adminRepliedAt||"").localeCompare(a.adminRepliedAt||""));
    if (!arr.length){
      userMessagesList.innerHTML="<div class='notif-item'>HenÃ¼z yÃ¶netici yanÄ±tÄ± yok.</div>";
      return;
    }
    userMessagesList.innerHTML = arr.map(m=>`
      <div class="notif-item">
        <div class="notif-meta">${m.adminRepliedAt || ""}</div>
        <div><strong>Sen:</strong> ${m.subject || ""}</div>
        <div style="font-size:12px;color:var(--muted);margin-top:2px;">${m.body || ""}</div>
        <div style="margin-top:4px;"><strong>YÃ¶netici:</strong> ${m.adminReply}</div>
      </div>
    `).join("");
  }

  document.getElementById("btn-send-ad").addEventListener("click", async () => {
    statusAd.textContent = "";
    if (!currentUser || currentUser.role !== "user") {
      statusAd.textContent = "Ã–nce giriÅŸ yapmalÄ±sÄ±n.";
      return;
    }
    if ((currentUser.credits || 0) <= 0) {
      statusAd.textContent = "Yeterli kredin yok. FiyatlandÄ±rma bÃ¶lÃ¼mÃ¼nden kredi al.";
      return;
    }
    const brand = document.getElementById("ad-brand").value.trim();
    const product = document.getElementById("ad-product").value.trim();
    const desc = document.getElementById("ad-desc").value.trim();
    if (!brand || !product || !desc) {
      statusAd.textContent = "LÃ¼tfen tÃ¼m alanlarÄ± doldur.";
      return;
    }
    try {
      const now = new Date().toLocaleString("tr-TR");
      await addDoc(collection(db,"requests"),{
        userId: currentUser.id,
        userName: currentUser.name,
        brand, product, desc,
        status: "pending",
        adminNote: "",
        createdAt: now
      });
      const newCredits = (currentUser.credits || 0) - 1;
      currentUser.credits = newCredits;
      await updateDoc(doc(db,"users",currentUser.id),{credits:newCredits});
      localStorage.setItem("spark_current_user", JSON.stringify(currentUser));
      renderProfile();
      loadNotificationsForUser();
      statusAd.textContent = "Reklam isteÄŸin gÃ¶nderildi. Kalan kredi: " + newCredits;
      document.getElementById("ad-desc").value="";
    } catch(e){
      console.error(e);
      statusAd.textContent="Ä°stek gÃ¶nderilirken hata oluÅŸtu.";
    }
  });

  document.getElementById("btn-send-msg").addEventListener("click", async () => {
    statusMsg.textContent="";
    if (!currentUser || currentUser.role !== "user"){
      statusMsg.textContent="Ã–nce giriÅŸ yapmalÄ±sÄ±n.";
      return;
    }
    const subject = document.getElementById("msg-subject").value.trim();
    const body = document.getElementById("msg-body").value.trim();
    if (!subject || !body){
      statusMsg.textContent="LÃ¼tfen konu ve mesajÄ± doldur.";
      return;
    }
    try{
      const now = new Date().toLocaleString("tr-TR");
      await addDoc(collection(db,"messages"),{
        userId: currentUser.id,
        userName: currentUser.name,
        subject, body,
        createdAt: now,
        adminReply:"",
        adminRepliedAt:""
      });
      statusMsg.textContent="MesajÄ±n yÃ¶neticiye gÃ¶nderildi.";
      document.getElementById("msg-subject").value="";
      document.getElementById("msg-body").value="";
      loadNotificationsForUser();
    }catch(e){
      console.error(e);
      statusMsg.textContent="Mesaj gÃ¶nderilirken hata oluÅŸtu.";
    }
  });

  document.getElementById("btn-post").addEventListener("click", async () => {
    statusPost.textContent="";
    if (!currentUser){
      statusPost.textContent="Ã–nce giriÅŸ yapmalÄ±sÄ±n.";
      return;
    }
    const title = document.getElementById("post-title").value.trim();
    const text = document.getElementById("post-text").value.trim();
    const link = document.getElementById("post-link").value.trim();
    if (!title || !text){
      statusPost.textContent="BaÅŸlÄ±k ve metin zorunludur.";
      return;
    }
    try{
      const now = new Date().toLocaleString("tr-TR");
      await addDoc(collection(db,"posts"),{
        userId: currentUser.id,
        userName: currentUser.name,
        title,text,link,
        createdAt: now
      });
      statusPost.textContent="GÃ¶nderi toplulukta paylaÅŸÄ±ldÄ±.";
      document.getElementById("post-title").value="";
      document.getElementById("post-text").value="";
      document.getElementById("post-link").value="";
      loadFeed();
    }catch(e){
      console.error(e);
      statusPost.textContent="GÃ¶nderi kaydedilirken hata oluÅŸtu.";
    }
  });

  async function loadFeed() {
    feedList.innerHTML="YÃ¼kleniyor...";
    try{
      const snap = await getDocs(collection(db,"posts"));
      const arr=[];
      snap.forEach(d=> arr.push({id:d.id,...d.data()}));
      arr.sort((a,b)=>(b.createdAt||"").localeCompare(a.createdAt||""));
      if (!arr.length){
        feedList.innerHTML="<div class='feed-post'>HenÃ¼z topluluk gÃ¶nderisi yok.</div>";
        return;
      }
      feedList.innerHTML = arr.map(p=>`
        <div class="feed-post">
          <div class="notif-meta">${p.createdAt || ""} â€“ ${p.userName || ""}</div>
          <div><strong>${p.title || ""}</strong></div>
          <div style="font-size:12px;color:var(--muted);margin-top:2px;">${p.text || ""}</div>
          ${p.link ? `<div style="margin-top:4px;font-size:12px;"><a href="${p.link}" target="_blank">BaÄŸlantÄ±</a></div>`:""}
        </div>
      `).join("");
    }catch(e){
      console.error(e);
      feedList.innerHTML="<div class='feed-post'>GÃ¶nderiler yÃ¼klenemedi.</div>";
    }
  }

  function ensureDefaultPlans() {
    onSnapshot(collection(db,"plans"), async snap => {
      if (snap.empty) {
        const now = new Date().toLocaleString("tr-TR");
        await addDoc(collection(db,"plans"),{name:"Starter",type:"credits",credits:3,priceTL:250,createdAt:now});
        await addDoc(collection(db,"plans"),{name:"Pro",type:"credits",credits:10,priceTL:1100,createdAt:now});
        await addDoc(collection(db,"plans"),{name:"Ultra",type:"credits",credits:25,priceTL:1750,createdAt:now});
        await addDoc(collection(db,"plans"),{name:"Spark Pro",type:"subscription",credits:0,priceTL:1450,createdAt:now});
        await addDoc(collection(db,"plans"),{name:"Influencer",type:"subscription",credits:0,priceTL:2500,createdAt:now});
      }
    });
  }
  ensureDefaultPlans();

  async function fetchPlans() {
    const snap = await getDocs(collection(db,"plans"));
    plans=[];
    snap.forEach(d=> plans.push({id:d.id,...d.data()}));
    plans.sort((a,b)=>(a.type||"").localeCompare(b.type||"") || (a.priceTL||0)-(b.priceTL||0));
  }

  function formatPrice(p) {
    const tl = p.priceTL || 0;
    const usd = (tl / USD_RATE).toFixed(2);
    const eur = (tl / EUR_RATE).toFixed(2);
    if (currentLang === "en") return `$${usd} (â‰ˆ ${tl}â‚º / â‚¬${eur})`;
    if (currentLang === "de") return `â‚¬${eur} (â‰ˆ ${tl}â‚º / $${usd})`;
    return `${tl}â‚º (â‰ˆ $${usd} / â‚¬${eur})`;
  }

  async function renderPlansUI() {
    await fetchPlans();
    const creditPlans = plans.filter(p=>p.type==="credits");
    const subs = plans.filter(p=>p.type==="subscription");
    let html = "";
    if (creditPlans.length){
      html += "<h4 style='margin-bottom:6px;'>Kredi Paketleri</h4>";
      creditPlans.forEach(p=>{
        html += `<div class="notif-item">
          <div class="notif-meta">${p.name} â€“ ${p.credits} kredi</div>
          <div>${formatPrice(p)}</div>
          <button class="btn-small btn-approve" data-buy="${p.id}" style="margin-top:6px;">Bu paketi al</button>
        </div>`;
      });
    }
    if (subs.length){
      html += "<h4 style='margin:10px 0 6px;'>Abonelikler</h4>";
      subs.forEach(p=>{
        html += `<div class="notif-item">
          <div class="notif-meta">${p.name} â€“ abonelik</div>
          <div>${formatPrice(p)}</div>
          <button class="btn-small btn-approve" data-buy="${p.id}" style="margin-top:6px;">AboneliÄŸi baÅŸlat</button>
        </div>`;
      });
    }
    plansList.innerHTML = html || "<div class='notif-item'>HenÃ¼z tanÄ±mlÄ± paket yok.</div>";
    plansList.querySelectorAll("button[data-buy]").forEach(btn=>{
      btn.addEventListener("click", ()=> buyPlan(btn.dataset.buy));
    });
  }

  async function buyPlan(planId) {
    statusPlans.textContent="";
    if (!currentUser || currentUser.role!=="user"){
      statusPlans.textContent="SatÄ±n almak iÃ§in giriÅŸ yapmalÄ±sÄ±n.";
      return;
    }
    const plan = plans.find(p=>p.id===planId);
    if (!plan){ statusPlans.textContent="Paket bulunamadÄ±."; return; }
    try{
      const tl = plan.priceTL || 0;
      const usd = parseFloat((tl / USD_RATE).toFixed(2));
      const eur = parseFloat((tl / EUR_RATE).toFixed(2));
      const now = new Date().toLocaleString("tr-TR");
      await addDoc(collection(db,"purchases"),{
        userId: currentUser.id,
        userName: currentUser.name,
        planId: plan.id,
        planName: plan.name,
        type: plan.type,
        priceTL: tl,
        priceUSD: usd,
        priceEUR: eur,
        createdAt: now
      });
      if (plan.type === "credits") {
        const addCredits = plan.credits || 0;
        const newCredits = (currentUser.credits || 0) + addCredits;
        currentUser.credits = newCredits;
        await updateDoc(doc(db,"users",currentUser.id),{credits:newCredits});
        localStorage.setItem("spark_current_user", JSON.stringify(currentUser));
        renderProfile();
        updateStudioAccess();
      }
      statusPlans.textContent = `${plan.name} satÄ±n alÄ±ndÄ±.`;
      loadNotificationsForUser();
    }catch(e){
      console.error(e);
      statusPlans.textContent="SatÄ±n alma kaydedilirken hata oluÅŸtu.";
    }
  }

  function renderPricingUI() {
    fetchPlans().then(()=>{
      if (!plans.length){
        pricingList.innerHTML="<p style='font-size:13px;color:var(--muted);'>Paket bulunamadÄ±.</p>";
        return;
      }
      const creditPlans = plans.filter(p=>p.type==="credits");
      const subs = plans.filter(p=>p.type==="subscription");
      let html="<h3 style='margin-bottom:8px;'>Genel Fiyat Tablosu (Demo)</h3>";
      if (creditPlans.length){
        html+="<h4 style='margin-bottom:4px;'>Kredi Paketleri</h4><ul style='font-size:13px;color:var(--muted);padding-left:16px;'>";
        creditPlans.forEach(p=>{
          html+=`<li>${p.name}: ${p.credits} kredi â€“ ${formatPrice(p)}</li>`;
        });
        html+="</ul>";
      }
      if (subs.length){
        html+="<h4 style='margin:10px 0 4px;'>Abonelikler</h4><ul style='font-size:13px;color:var(--muted);padding-left:16px;'>";
        subs.forEach(p=>{
          html+=`<li>${p.name} aboneliÄŸi â€“ ${formatPrice(p)}</li>`;
        });
        html+="</ul>";
      }
      pricingList.innerHTML=html;
    });
  }

  async function refreshStats() {
    try{
      const u = await getDocs(collection(db,"users"));
      const r = await getDocs(collection(db,"requests"));
      const m = await getDocs(collection(db,"messages"));
      const p = await getDocs(collection(db,"purchases"));
      const posts = await getDocs(collection(db,"posts"));
      const pl = await getDocs(collection(db,"plans"));
      statsEls.users.textContent = u.size;
      statsEls.requests.textContent = r.size;
      statsEls.messages.textContent = m.size;
      statsEls.purchases.textContent = p.size;
      statsEls.posts.textContent = posts.size;
      statsEls.plans.textContent = pl.size;
    }catch(e){
      console.error(e);
    }
  }

  function renderAdminPlans() {
    onSnapshot(collection(db,"plans"), snap=>{
      const arr=[];
      snap.forEach(d=> arr.push({id:d.id,...d.data()}));
      arr.sort((a,b)=>(a.type||"").localeCompare(b.type||"") || (a.priceTL||0)-(b.priceTL||0));
      adminPlansBox.innerHTML = arr.map(p=>{
        return `<div class="admin-item">
          <div class="admin-meta">${p.type==="credits" ? "Kredi Paketi" : "Abonelik"} â€“ ID: ${p.id}</div>
          <div><strong>${p.name}</strong> ${p.type==="credits" ? "("+(p.credits||0)+" kredi)" : ""}</div>
          <div class="admin-actions" style="margin-top:6px;">
            <input type="number" data-plan="${p.id}" value="${p.priceTL || 0}" />
            <button class="btn-small btn-approve" data-save-plan="${p.id}">TL FiyatÄ± Kaydet</button>
          </div>
        </div>`;
      }).join("") || "<div class='admin-item'>Plan bulunamadÄ±.</div>";
      adminPlansBox.querySelectorAll("button[data-save-plan]").forEach(btn=>{
        btn.addEventListener("click", async ()=>{
          const id = btn.dataset.savePlan;
          const input = adminPlansBox.querySelector(`input[data-plan='${id}']`);
          const val = Number(input.value || 0);
          try{
            await updateDoc(doc(db,"plans",id),{priceTL:val});
            statusAddPlan.textContent="Fiyat gÃ¼ncellendi.";
            renderPlansUI();
            renderPricingUI();
            refreshStats();
          }catch(e){
            console.error(e);
            statusAddPlan.textContent="Fiyat gÃ¼ncellenemedi.";
          }
        });
      });
    });
  }

  document.getElementById("btn-add-plan").addEventListener("click", async ()=>{
    statusAddPlan.textContent="";
    const name = document.getElementById("new-plan-name").value.trim();
    const type = document.getElementById("new-plan-type").value;
    const credits = Number(document.getElementById("new-plan-credits").value || 0);
    const priceTL = Number(document.getElementById("new-plan-tl").value || 0);
    if (!name){
      statusAddPlan.textContent="Ä°sim zorunlu.";
      return;
    }
    try{
      const now = new Date().toLocaleString("tr-TR");
      await addDoc(collection(db,"plans"),{name,type,credits,priceTL,createdAt:now});
      statusAddPlan.textContent="Yeni paket/abonelik eklendi.";
      document.getElementById("new-plan-name").value="";
      renderPlansUI();
      renderPricingUI();
      refreshStats();
    }catch(e){
      console.error(e);
      statusAddPlan.textContent="Paket eklenemedi.";
    }
  });

  function subscribeAdminStreams() {
    onSnapshot(collection(db,"requests"), snap=>{
      const arr=[];
      snap.forEach(d=> arr.push({id:d.id,...d.data()}));
      arr.sort((a,b)=>(b.createdAt||"").localeCompare(a.createdAt||""));
      adminRequestsBox.innerHTML = arr.map(r=>{
        const status = r.status || "pending";
        const statusHtml =
          status==="approved" ? "<span class='pill-status s-approved'>OnaylandÄ±</span>" :
          status==="rejected" ? "<span class='pill-status s-rejected'>Reddedildi</span>" :
          "<span class='pill-status s-pending'>Beklemede</span>";
        const disabled = status==="approved" ? "disabled" : "";
        return `<div class="admin-item">
          <div class="admin-meta">${r.createdAt || ""} â€“ ${r.userName || ""} ${statusHtml}</div>
          <div><strong>${r.brand || ""}</strong> / ${r.product || ""}</div>
          <div style="font-size:12px;color:var(--muted);margin-top:2px;">${r.desc || ""}</div>
          <div class="admin-actions">
            <input type="text" placeholder="YÃ¶netici notu" data-note="${r.id}" value="${r.adminNote || ""}">
            <button class="btn-small btn-approve" data-approve="${r.id}" ${disabled}>Onayla</button>
            <button class="btn-small btn-reject" data-reject="${r.id}" ${disabled && "disabled"}>Reddet</button>
          </div>
        </div>`;
      }).join("") || "<div class='admin-item'>Reklam isteÄŸi yok.</div>";
      adminRequestsBox.querySelectorAll("button[data-approve]").forEach(btn=>{
        btn.addEventListener("click", ()=> handleRequestAction(btn.dataset.approve,"approved"));
      });
      adminRequestsBox.querySelectorAll("button[data-reject]").forEach(btn=>{
        btn.addEventListener("click", ()=> handleRequestAction(btn.dataset.reject,"rejected"));
      });
      refreshStats();
    });

    onSnapshot(collection(db,"messages"), snap=>{
      const arr=[];
      snap.forEach(d=> arr.push({id:d.id,...d.data()}));
      arr.sort((a,b)=>(b.createdAt||"").localeCompare(a.createdAt||""));
      adminMessagesBox.innerHTML = arr.map(m=>{
        return `<div class="admin-item">
          <div class="admin-meta">${m.createdAt || ""} â€“ ${m.userName || ""}</div>
          <div><strong>${m.subject || ""}</strong></div>
          <div style="font-size:12px;color:var(--muted);margin-top:2px;">${m.body || ""}</div>
          <div class="admin-actions">
            <input type="text" placeholder="YanÄ±t yaz" data-reply="${m.id}" value="${m.adminReply || ""}">
            <button class="btn-small btn-approve" data-send-reply="${m.id}">YanÄ±t GÃ¶nder</button>
          </div>
        </div>`;
      }).join("") || "<div class='admin-item'>Mesaj yok.</div>";
      adminMessagesBox.querySelectorAll("button[data-send-reply]").forEach(btn=>{
        btn.addEventListener("click", ()=> sendMessageReply(btn.dataset.sendReply));
      });
      refreshStats();
    });

    onSnapshot(collection(db,"users"), snap=>{
      const arr=[];
      snap.forEach(d=> arr.push({id:d.id,...d.data()}));
      arr.sort((a,b)=>(a.name||"").localeCompare(b.name||""));
      adminUsersBox.innerHTML = arr.map(u=>`
        <div class="admin-item">
          <div class="admin-meta">${u.createdAt || ""} â€“ ID: ${u.id}</div>
          <div><strong>${u.name}</strong> â€“ ${u.email}</div>
          <div style="font-size:12px;color:var(--muted);margin-top:2px;">Rol: ${u.role || "user"} â€“ Kredi: ${u.credits || 0}</div>
        </div>
      `).join("") || "<div class='admin-item'>Ãœye yok.</div>";
      refreshStats();
    });

    onSnapshot(collection(db,"posts"), snap=>{
      const arr=[];
      snap.forEach(d=> arr.push({id:d.id,...d.data()}));
      arr.sort((a,b)=>(b.createdAt||"").localeCompare(a.createdAt||""));
      adminPostsBox.innerHTML = arr.map(p=>`
        <div class="admin-item">
          <div class="admin-meta">${p.createdAt || ""} â€“ ${p.userName || ""}</div>
          <div><strong>${p.title}</strong></div>
        </div>
      `).join("") || "<div class='admin-item'>GÃ¶nderi yok.</div>";
      refreshStats();
    });
  }
  subscribeAdminStreams();

  async function handleRequestAction(id, status) {
    try{
      const noteInput = adminRequestsBox.querySelector(`input[data-note='${id}']`);
      const adminNote = noteInput ? noteInput.value.trim() : "";
      const ref = doc(db,"requests",id);
      const newData = { status, adminNote };
      await updateDoc(ref,newData);
      if (status === "approved") {
        const snap = await getDocs(collection(db,"requests"));
        let rData=null;
        snap.forEach(d=>{ if (d.id===id) rData=d.data(); });
        if (rData && rData.userId) {
          const userRef = doc(db,"users",rData.userId);
          const usersSnap = await getDocs(collection(db,"users"));
          usersSnap.forEach(d=>{
            if (d.id===rData.userId){
              const u=d.data();
              const credits=u.credits || 0;
              updateDoc(userRef,{credits});
            }
          });
        }
      }
      loadNotificationsForUser();
    }catch(e){
      console.error(e);
    }
  }

  async function sendMessageReply(id) {
    try{
      const input = adminMessagesBox.querySelector(`input[data-reply='${id}']`);
      const reply = input ? input.value.trim() : "";
      const now = new Date().toLocaleString("tr-TR");
      await updateDoc(doc(db,"messages",id),{
        adminReply: reply,
        adminRepliedAt: now
      });
      loadUserReplies();
      loadNotificationsForUser();
    }catch(e){
      console.error(e);
    }
  }

  document.getElementById("btn-clear-requests").addEventListener("click", async ()=>{
    try{
      const snap = await getDocs(collection(db,"requests"));
      const promises=[];
      snap.forEach(d=> promises.push(deleteDoc(doc(db,"requests",d.id))));
      await Promise.all(promises);
    }catch(e){console.error(e);}
  });

  document.getElementById("btn-clear-messages").addEventListener("click", async ()=>{
    try{
      const snap = await getDocs(collection(db,"messages"));
      const promises=[];
      snap.forEach(d=> promises.push(deleteDoc(doc(db,"messages",d.id))));
      await Promise.all(promises);
    }catch(e){console.error(e);}
  });

  function pushChat(role, text) {
    const row = document.createElement("div");
    row.className = "chat-row " + role;
    const bubble = document.createElement("div");
    bubble.className = "chat-bubble";
    bubble.textContent = text;
    row.appendChild(bubble);
    assistantChat.appendChild(row);
    assistantChat.scrollTop = assistantChat.scrollHeight;
  }

  function generateAssistantAnswer(q) {
    const t = q.toLowerCase();
    const ideas = [];

    if (t.includes("kulÃ¼p") || t.includes("spor") || t.includes("takÄ±m")) {
      ideas.push(
        "MaÃ§ gÃ¼nlerinden Ã¶nce sosyal medyada \"maÃ§ ritÃ¼eli\" kÄ±sa videolarÄ± Ã§ekin. Her videoda oyuncular 3 saniyelik slogan sÃ¶ylesin: \"Kalk, tribÃ¼ne gel!\" gibi. Sonunda kulÃ¼bÃ¼n logosu ve maÃ§ tarihi gelsin.",
        "GenÃ§ taraftarlarÄ± hedeflemek iÃ§in TikTokâ€™ta kÄ±sa challenge baÅŸlatÄ±n: En iyi gol sevinci, en iyi savunma pozu vb. Kazanan videoyu kulÃ¼bÃ¼n resmi hesabÄ±nda paylaÅŸacaÄŸÄ±nÄ±zÄ± duyurun."
      );
    }
    if (t.includes("okul") || t.includes("kampÃ¼s")) {
      ideas.push(
        "Okulunuz iÃ§in \"Bir GÃ¼nÃ¼m\" formatÄ±nda videolar Ã§ektirin. Her videoda farklÄ± bir Ã¶ÄŸrenci kendi gÃ¼nÃ¼nÃ¼ 15â€“20 saniyede anlatÄ±r, sonunda okul logosu ve slogan gÃ¶rÃ¼nÃ¼r.",
        "KulÃ¼plerin ve projelerin stant aÃ§tÄ±ÄŸÄ± bir \"kampÃ¼s keÅŸif gÃ¼nÃ¼\" organize edip tÃ¼m standlarÄ± tek videoda hÄ±zlÄ± geÃ§iÅŸli olarak gÃ¶sterin. Videonun aÃ§Ä±klamasÄ±na baÅŸvuru linkini ekleyin."
      );
    }
    if (t.includes("youtube") || t.includes("video") || t.includes("kanal")) {
      ideas.push(
        "YouTube iÃ§in 3 bÃ¶lÃ¼mlÃ¼k mini seri yapÄ±n: 1) TanÄ±ÅŸma â€“ kulÃ¼p/marka hikayesi, 2) Kamera arkasÄ± â€“ hazÄ±rlÄ±klar, 3) Taraftar/mÃ¼ÅŸteri yorumlarÄ±. Her bÃ¶lÃ¼mÃ¼n sonunda aynÄ± CTA cÃ¼mlesini kullanÄ±n.",
        "VideolarÄ±nÄ±zda 5 saniyelik tekrar eden bir intro ve 3 saniyelik outro kullanÄ±n. Bu, marka hafÄ±zasÄ±nÄ± gÃ¼Ã§lendirir. Ä°ntro kÄ±sa bir jingle ve hareketli logo animasyonu olabilir."
      );
    }
    if (t.includes("instagram") || t.includes("tiktok") || t.includes("reels")) {
      ideas.push(
        "Instagram Reels iÃ§in 7 saniyelik \"Ã¶ncesi/sonrasÄ±\" videolarÄ± Ã§ok iÅŸe yarar. Ä°lk 2 saniyede problem, sonraki 5 saniyede Ã§Ã¶zÃ¼mÃ¼ ve markanÄ±zÄ± gÃ¶sterin.",
        "TikTokâ€™ta trend sesleri kendi metninizle birleÅŸtirin. Ã–rneÄŸin yazÄ±yÄ± â€œBu sesi gÃ¶rÃ¼p de bizim kulÃ¼bÃ¼ dÃ¼ÅŸÃ¼nmeyen?â€ gibi eÄŸlenceli cÃ¼mlelerle baÅŸlayÄ±n."
      );
    }
    if (t.includes("slogan")) {
      ideas.push(
        "Slogan Ã¼retirken 3 kuralÄ± kullan: KÄ±sa (3â€“5 kelime), ritimli ve iÃ§inde fiil olsun. Ã–rn: \"Topu Bize BÄ±rak\", \"Sahne Bizim\", \"TakÄ±mÄ±nla YÃ¼rÃ¼\".",
        "KulÃ¼bÃ¼n deÄŸerlerinden (cesaret, birlik, eÄŸlence) birini seÃ§, o kelimeyi mutlaka sloganda kullan. BÃ¶ylece her iÃ§erikte aynÄ± duyguyu vurgulamÄ±ÅŸ olursun."
      );
    }
    if (t.includes("influencer") || t.includes("influencer paketi")) {
      ideas.push(
        "Influencer paketi iÃ§in mikro-influencerâ€™lara odaklan: 5â€“10K takipÃ§ili ama hedef kitlenle tam Ã¶rtÃ¼ÅŸen hesaplarla anlaÅŸmak genelde bÃ¼yÃ¼k hesaplardan daha verimli olur.",
        "Influencerâ€™dan sadece Ã¼rÃ¼n tanÄ±tÄ±mÄ± istemek yerine, kendi tarzÄ±nda Ã¶zgÃ¼n iÃ§erik Ã¼retmesine izin ver. Sadece videonun sonunda markanÄ±n net ÅŸekilde gÃ¶rÃ¼nmesini ÅŸart koÅŸ."
      );
    }

    if (!ideas.length) {
      ideas.push(
        "Ã–nce hedef kitleyi netleÅŸtir: yaÅŸ aralÄ±ÄŸÄ±, ilgi alanlarÄ±, en aktif olduklarÄ± platform. Sonra tek cÃ¼mleyle kampanya hedefini yaz: \"Yeni formamÄ±zÄ±n lansmanÄ±nÄ± duyurmak\" gibi.",
        "Her reklam fikrini 3 parÃ§aya bÃ¶l: Hook (ilk 2 saniyede merak uyandÄ±ran kÄ±sÄ±m), Story (Ã¼rÃ¼nÃ¼ gÃ¶sterdiÄŸin bÃ¶lÃ¼m), Call to Action (takip et, forma al, maÃ§a gel gibi aÃ§Ä±k Ã§aÄŸrÄ±)."
      );
    }

    const pick = ideas[Math.floor(Math.random()*ideas.length)];
    const closing = "Ä°stersen bana hedef kitleyi, bÃ¼tÃ§eyi ve hangi platformu kullanacaÄŸÄ±nÄ± da sÃ¶ylersen daha nokta atÄ±ÅŸÄ± bir senaryo yazabilirim.";
    return pick + " " + closing;
  }

  function handleAssistantSend() {
    const text = assistantInput.value.trim();
    if (!text) return;
    pushChat("me", text);
    assistantInput.value = "";
    const answer = generateAssistantAnswer(text);
    setTimeout(()=>{ pushChat("ai", answer); }, 300);
  }

  assistantSend.addEventListener("click", handleAssistantSend);
  assistantInput.addEventListener("keydown", e=>{
    if (e.key === "Enter") { e.preventDefault(); handleAssistantSend(); }
  });

</script>
</body>
</html>
