<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Spark Ad Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #050816;
      --bg-soft: #0b1120;
      --bg-softer: #111827;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.15);
      --danger: #f97373;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
      --radius: 10px;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.4);
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: var(--font-sans);
      background: radial-gradient(circle at top, #111827 0, #020617 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: stretch;
    }

    #app {
      width: 100%;
      max-width: 1200px;
      margin: 16px;
      background: linear-gradient(145deg, #020617 0%, #020715 40%, #020617 100%);
      border-radius: 18px;
      box-shadow: var(--shadow-soft);
      border: 1px solid #111827;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Topbar */
    .topbar {
      display: flex;
      align-items: center;
      padding: 12px 18px;
      border-bottom: 1px solid #111827;
      background: radial-gradient(circle at 0 50%, #0b1120 0, #020617 55%);
    }

    .logo {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fde68a, #f97316 55%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 18px;
      color: #020617;
      margin-right: 10px;
      box-shadow: 0 0 18px rgba(249, 115, 22, 0.55);
    }

    .top-title {
      font-weight: 650;
      letter-spacing: 0.03em;
      font-size: 18px;
    }

    .top-tagline {
      font-size: 12px;
      color: var(--muted);
    }

    .top-left {
      display: flex;
      flex-direction: column;
      margin-right: auto;
    }

    .top-nav {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .nav-btn {
      border: 1px solid transparent;
      background: transparent;
      color: var(--muted);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: 0.2s all ease;
    }

    .nav-btn:hover {
      background: #020617;
      border-color: #1f2937;
      color: var(--text);
    }

    .nav-btn.primary {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: #e0f2fe;
      font-weight: 600;
    }

    .nav-btn.primary:hover {
      background: rgba(56, 189, 248, 0.25);
      box-shadow: 0 0 18px rgba(56, 189, 248, 0.35);
    }

    .nav-btn.danger {
      border-color: #4b1b1b;
      color: #fecaca;
      background: rgba(220, 38, 38, 0.08);
    }

    .nav-btn.danger:hover {
      background: rgba(220, 38, 38, 0.16);
    }

    main {
      display: flex;
      flex: 1;
      padding: 16px;
      overflow: auto;
    }

    .screen { display: none; width: 100%; }
    .screen.active { display: block; }

    /* Info Screen */
    .info-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.3fr);
      gap: 18px;
      align-items: stretch;
    }

    .card {
      background: radial-gradient(circle at top left, #020617 0, #020617 40%);
      border-radius: 16px;
      padding: 18px;
      border: 1px solid #111827;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45);
    }

    .info-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .info-sub {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 16px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 14px;
    }

    .pill {
      background: rgba(15, 23, 42, 0.85);
      border-radius: 999px;
      padding: 5px 9px;
      font-size: 11px;
      color: var(--muted);
      border: 1px solid #1f2937;
    }

    .pill.strong {
      border-color: var(--accent);
      color: #e0f2fe;
      background: rgba(8, 47, 73, 0.9);
    }

    .gradient-blob {
      width: 260px;
      height: 260px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 10% 0%, rgba(248, 250, 252, 0.1) 0, transparent 55%),
        radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.45) 0, transparent 55%),
        radial-gradient(circle at 75% 15%, rgba(234, 179, 8, 0.7) 0, transparent 50%),
        radial-gradient(circle at 60% 80%, rgba(16, 185, 129, 0.55) 0, transparent 45%);
      position: relative;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .blob-inner {
      width: 160px;
      height: 160px;
      border-radius: 36px;
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid rgba(226, 232, 240, 0.08);
      box-shadow: 0 18px 38px rgba(15, 23, 42, 0.95);
      padding: 14px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      color: var(--text);
      font-size: 12px;
    }

    .blob-title { font-size: 14px; font-weight: 600; }

    .blob-chip {
      font-size: 10px;
      border-radius: 999px;
      padding: 3px 7px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
      display: inline-block;
      margin-top: 4px;
    }

    .blob-metric-row {
      display: flex;
      justify-content: space-between;
      margin-top: 6px;
    }

    .blob-metric {
      font-size: 11px;
      color: var(--muted);
    }

    .blob-metric strong {
      display: block;
      color: #bfdbfe;
      font-size: 13px;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 16px;
      flex-wrap: wrap;
    }

    .btn-big {
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid transparent;
      font-size: 14px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
      transition: 0.2s all ease;
    }

    .btn-big.primary {
      background: linear-gradient(135deg, #0ea5e9, #22c55e);
      color: #0b1120;
      box-shadow: 0 20px 45px rgba(56, 189, 248, 0.55);
    }

    .btn-big.primary:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    .btn-big.ghost {
      background: rgba(15, 23, 42, 0.9);
      border-color: #1e293b;
      color: var(--muted);
    }

    .btn-big.ghost:hover {
      background: #020617;
      color: var(--text);
    }

    /* Auth */
    .auth-layout { max-width: 640px; margin: 0 auto; }

    .tabs {
      display: flex;
      gap: 6px;
      margin-bottom: 14px;
    }

    .tab-btn {
      flex: 1;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--muted);
      font-size: 13px;
      cursor: pointer;
      transition: 0.2s all;
    }

    .tab-btn.active {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: #e0f2fe;
      font-weight: 600;
    }

    .form-grid { display: grid; gap: 10px; margin-top: 8px; }

    label {
      font-size: 12px;
      color: var(--muted);
      display: block;
      margin-bottom: 2px;
    }

    input,
    select,
    textarea {
      width: 100%;
      border-radius: 8px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text);
      padding: 7px 9px;
      font-size: 13px;
      outline: none;
      transition: 0.15s border-color, 0.15s box-shadow, 0.15s background;
    }

    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.25);
      background: #020819;
    }

    textarea { min-height: 80px; resize: vertical; }

    .form-actions {
      margin-top: 10px;
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    .btn-sm {
      padding: 7px 13px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--muted);
      font-size: 12px;
      cursor: pointer;
      transition: 0.2s;
    }

    .btn-sm.primary {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: #e0f2fe;
    }

    .btn-sm.primary:hover {
      background: rgba(56, 189, 248, 0.25);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      border-radius: 999px;
      padding: 2px 8px;
      font-size: 10px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: var(--muted);
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }

    .hint { font-size: 11px; color: var(--muted); margin-top: 6px; }

    /* User Screen */
    .columns-2 {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.1fr);
      gap: 14px;
    }

    .section-title { font-size: 15px; font-weight: 600; margin-bottom: 8px; }

    .section-sub {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .tag {
      font-size: 10px;
      border-radius: 999px;
      padding: 2px 6px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid #1f2937;
      color: var(--muted);
    }

    .tag.pro {
      border-color: #22c55e;
      color: #bbf7d0;
    }

    .tag.influencer {
      border-color: #f97316;
      color: #fed7aa;
    }

    .tag.standard {
      border-color: #38bdf8;
      color: #bae6fd;
    }

    .user-inline {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 8px;
      flex-wrap: wrap;
    }

    /* Chat */
    .chat-box {
      background: #020617;
      border-radius: 12px;
      border: 1px solid #1f2937;
      height: 260px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .chat-log {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      font-size: 12px;
    }

    .chat-line {
      margin-bottom: 6px;
      display: flex;
      gap: 6px;
    }

    .chat-line.me { justify-content: flex-end; }

    .chat-bubble {
      max-width: 80%;
      padding: 6px 9px;
      border-radius: 12px;
      border-bottom-left-radius: 3px;
      background: #020617;
      border: 1px solid #1f2937;
    }

    .chat-line.me .chat-bubble {
      background: rgba(56, 189, 248, 0.16);
      border-color: rgba(56, 189, 248, 0.55);
    }

    .chat-line.ai .chat-bubble {
      background: rgba(15, 23, 42, 0.95);
    }

    .chat-meta {
      font-size: 10px;
      color: var(--muted);
      margin-bottom: 2px;
    }

    .chat-input-row {
      display: flex;
      border-top: 1px solid #111827;
    }

    .chat-input-row input {
      border-radius: 0;
      border: none;
      border-right: 1px solid #111827;
    }

    .chat-input-row button {
      border: none;
      background: var(--accent-soft);
      color: #e0f2fe;
      padding: 0 14px;
      cursor: pointer;
      font-size: 12px;
    }

    /* Pricing */
    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 10px;
    }

    .price-card {
      border-radius: 14px;
      padding: 12px;
      border: 1px solid #1f2937;
      background: radial-gradient(circle at top, #020617 0, #020617 55%);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .price-name { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
    .price-tag { font-size: 11px; color: var(--muted); margin-bottom: 8px; }
    .price-value { font-size: 18px; font-weight: 700; margin-bottom: 2px; }
    .price-note { font-size: 10px; color: var(--muted); margin-bottom: 8px; }

    .price-perks {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .price-perks li { margin-bottom: 4px; }

    /* Admin */
    .admin-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.4fr);
      gap: 12px;
    }

    .list {
      max-height: 260px;
      overflow-y: auto;
      font-size: 12px;
    }

    .list-item {
      padding: 7px 8px;
      border-radius: 8px;
      border: 1px solid #111827;
      background: rgba(15, 23, 42, 0.75);
      margin-bottom: 6px;
    }

    .list-item strong { font-size: 12px; }

    .list-meta {
      font-size: 10px;
      color: var(--muted);
    }

    .label-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-bottom: 4px;
    }

    .pill-small {
      font-size: 9px;
      padding: 1px 5px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      color: var(--muted);
    }

    .pill-small.green {
      border-color: #22c55e;
      color: #bbf7d0;
    }

    .pill-small.orange {
      border-color: #f97316;
      color: #fed7aa;
    }

    .pill-small.blue {
      border-color: #38bdf8;
      color: #bae6fd;
    }

    .pill-small.gray {
      border-color: #4b5563;
      color: #9ca3af;
    }

    .admin-actions {
      display: flex;
      gap: 6px;
      margin-top: 4px;
      flex-wrap: wrap;
    }

    .admin-actions button {
      font-size: 11px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--muted);
      cursor: pointer;
    }

    .admin-actions button.ok {
      border-color: #22c55e;
      color: #bbf7d0;
    }

    .admin-actions button.dgr {
      border-color: #f97316;
      color: #fed7aa;
    }

    /* Profile */
    .avatar-circle {
      width: 54px;
      height: 54px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0, #22c55e, #38bdf8);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 20px;
      color: #020617;
    }

    .profile-row {
      display: flex;
      gap: 14px;
      align-items: center;
      margin-bottom: 14px;
    }

    .profile-name { font-size: 16px; font-weight: 600; }

    @media (max-width: 900px) {
      .info-layout,
      .columns-2,
      .admin-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .topbar { flex-wrap: wrap; gap: 10px; }
      main { padding: 10px; }
      #app { margin: 8px; }
    }
  </style>
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="logo">SA</div>
      <div class="top-left">
        <div class="top-title">Spark Ad Studio</div>
        <div class="top-tagline">Kulüpler ve markalar için akılda kalan mini reklam stüdyosu</div>
      </div>
      <nav class="top-nav">
        <button class="nav-btn" data-nav="home" id="nav-home">Ana Sayfa</button>
        <button class="nav-btn" data-nav="studio" id="nav-studio">Stüdyo</button>
        <button class="nav-btn" data-nav="community" id="nav-community">Topluluk</button>
        <button class="nav-btn" data-nav="assistant" id="nav-assistant">Asistan</button>
        <button class="nav-btn" data-nav="pricing" id="nav-pricing">Fiyatlandırma</button>
        <button class="nav-btn" data-nav="profile" id="nav-profile">Profil</button>
        <button class="nav-btn danger" id="btn-logout" style="display:none;">Çıkış Yap</button>
        <button class="nav-btn primary" id="btn-auth">Üye Ol / Giriş Yap</button>
      </nav>
    </header>

    <main>
      <!-- INFO / LANDING -->
      <section id="screen-info" class="screen active">
        <div class="info-layout">
          <div class="card">
            <div class="badge">
              <span class="badge-dot"></span>
              7. sınıftan global markalara: Herkes için mini stüdyo
            </div>
            <h1 class="info-title">Kulübün reklamlarını 10 dakikada “yayına hazır” hale getir.</h1>
            <p class="info-sub">
              Spark Ad Studio, kulüpler ve markalar için <strong>kısa, akılda kalıcı reklamlar</strong>
              üretmen için tasarlandı. Sen brief veriyorsun, sistem senin için fikir, metin ve sahne
              akışını hazırlıyor.
            </p>

            <div class="pill-row">
              <span class="pill strong">Kulüpler • Markalar • Okul projeleri</span>
              <span class="pill">Hazır şablonlar</span>
              <span class="pill">Yapay zeka asistanı</span>
              <span class="pill">Paketli fiyatlandırma</span>
            </div>

            <p class="info-sub" style="margin-top:8px;">
              Başta Işıkkent Eğitim Kampüsü olmak üzere, genç yaratıcıların “kendi ajansı” gibi
              kullanabileceği bir stüdyo düşün.
            </p>

            <div class="btn-row">
              <button class="btn-big primary" id="btn-info-start">
                Hemen Başla
              </button>
              <button class="btn-big ghost" id="btn-info-pricing">
                Paketleri Gör
              </button>
            </div>

            <p class="hint">
              Üye olduktan sonra <strong>“Yönetici” paneli</strong> üzerinden paket fiyatlarını,
              kredi sayılarını ve influencer ayrıcalıklarını değiştirebilirsin.
            </p>
          </div>

          <div class="card" style="display:flex;align-items:center;justify-content:center;">
            <div class="gradient-blob">
              <div class="blob-inner">
                <div>
                  <div class="blob-title">Yıllık Kulüp Özeti</div>
                  <div class="blob-chip">Spark AI • Reklam Özeti</div>
                </div>
                <div class="blob-metric-row">
                  <div class="blob-metric">
                    Katıldığı yarışma
                    <strong>+18</strong>
                  </div>
                  <div class="blob-metric">
                    Toplam kilometre
                    <strong>12.450 km</strong>
                  </div>
                </div>
                <div class="blob-metric-row">
                  <div class="blob-metric">
                    Kazanılan madalya
                    <strong>27</strong>
                  </div>
                  <div class="blob-metric">
                    Etkileşim artışı
                    <strong>%164</strong>
                  </div>
                </div>
                <p class="hint" style="margin-top:6px;">
                  Spark Ad Studio, kulübün <strong>yıl boyunca yaptıklarını</strong> tek bir
                  “özet videoya” dönüştürmene yardım eder.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- AUTH -->
      <section id="screen-auth" class="screen">
        <div class="auth-layout card">
          <div class="section-title">Spark Ad hesabına giriş yap</div>
          <div class="section-sub">
            Reklam stüdyona erişmek için önce hesabına giriş yap ya da yeni bir hesap oluştur.
          </div>

          <div class="tabs">
            <button class="tab-btn active" id="tab-login">Giriş Yap</button>
            <button class="tab-btn" id="tab-register">Üye Ol</button>
          </div>

          <div id="auth-login">
            <div class="form-grid">
              <div>
                <label for="login-email">E-posta</label>
                <input id="login-email" type="email" placeholder="ornek@kulubun.com" />
              </div>
              <div>
                <label for="login-pass">Şifre</label>
                <input id="login-pass" type="password" placeholder="••••••••" />
              </div>
            </div>
            <div class="form-actions">
              <button class="btn-sm" id="btn-forgot">Şifremi unuttum</button>
              <button class="btn-sm primary" id="btn-login">Giriş Yap</button>
            </div>
            <p class="hint" id="auth-message"></p>
          </div>

          <div id="auth-register" style="display:none;">
            <div class="form-grid">
              <div>
                <label for="reg-name">Ad Soyad</label>
                <input id="reg-name" type="text" placeholder="Emir Anka" />
              </div>
              <div>
                <label for="reg-email">E-posta</label>
                <input id="reg-email" type="email" placeholder="ornek@kulubun.com" />
              </div>
              <div>
                <label for="reg-pass">Şifre</label>
                <input id="reg-pass" type="password" placeholder="En az 6 karakter" />
              </div>
            </div>
            <div class="form-actions">
              <button class="btn-sm" id="btn-to-login">Zaten hesabım var</button>
              <button class="btn-sm primary" id="btn-register">Üye Ol ve Giriş Yap</button>
            </div>
            <p class="hint">
              Yeni hesaplar varsayılan olarak <strong>Standart</strong> pakette açılır. Daha sonra
              yönetici, seni Pro ya da Influencer yapabilir.
            </p>
          </div>
        </div>
      </section>

      <!-- USER -->
      <section id="screen-user" class="screen">
        <div class="columns-2">
          <div class="card">
            <div class="user-inline">
              <div>
                <div class="section-title" id="user-welcome">Hoş geldin!</div>
                <div class="section-sub">
                  Burası senin mini reklam kontrol panelin. Kulübün için fikirler üret, istek bırak,
                  AI asistandan destek al.
                </div>
              </div>
              <span id="user-plan-badge" class="tag standard">Standart Üye</span>
            </div>

            <div class="section-title">Reklam İsteği Oluştur</div>
            <div class="section-sub">
              Kulübün / markan için bir reklam fikri iste. Yönetici onayı sonrası stüdyoya
              aktarılacak.
            </div>

            <div class="form-grid">
              <div>
                <label for="req-brand">Marka / Kulüp Adı</label>
                <input id="req-brand" placeholder="Örn: Işıkkent Okçuluk Kulübü" />
              </div>
              <div>
                <label for="req-product">Ürün / Kampanya</label>
                <input id="req-product" placeholder="Yeni sezon forma lansmanı" />
              </div>
              <div>
                <label for="req-details">Kısa Açıklama</label>
                <textarea
                  id="req-details"
                  placeholder="Hedef kitle, ton, süresi gibi temel bilgileri yaz."
                ></textarea>
              </div>
            </div>
            <div class="form-actions">
              <button class="btn-sm primary" id="btn-send-request">İstek Gönder</button>
            </div>
            <p class="hint" id="req-hint"></p>
          </div>

          <div class="card">
            <div class="section-title">Spark AI Asistan</div>
            <div class="section-sub">
              Kulübün hakkında nasıl reklam yapabileceğini sor. Örn:
              <em>"Okçuluk kulübüm için 15 saniyelik Instagram Reels fikri verir misin?"</em>
            </div>

            <div class="chat-box">
              <div id="chat-log" class="chat-log"></div>
              <div class="chat-input-row">
                <input
                  id="assistant-input"
                  placeholder="Sorunu yaz: Kulübüm için nasıl bir kampanya hazırlayabilirim?"
                />
                <button id="assistant-send">Gönder</button>
              </div>
            </div>
          </div>
        </div>

        <div style="margin-top:14px;" class="card">
          <div class="section-title">Paketin ve Ayrıcalıkların</div>
          <div class="section-sub">
            Aktif paketine göre yapay zekanın derinliği, öncelik sıralaman ve renk etiketin
            değişir. Influencer paketi en güçlü ayrıcalıkları içerir.
          </div>
          <ul class="price-perks" id="user-perks"></ul>
        </div>
      </section>

      <!-- ADMIN -->
      <section id="screen-admin" class="screen">
        <div class="card" style="margin-bottom:12px;">
          <div class="section-title">Yönetici Paneli</div>
          <div class="section-sub">
            Üyeleri görüntüle, reklam isteklerini onayla / reddet, mesajla ve paket fiyatlarını
            düzenle. Normal kullanıcılar bu panelin varlığını göremez.
          </div>
        </div>

        <div class="admin-grid">
          <div>
            <div class="card" style="margin-bottom:10px;">
              <div class="section-title">Üyeler</div>
              <div class="section-sub">
                Paket almayanlar temaya göre beyaz / siyah isimle gösterilir. Paket sahibi
                kullanıcılar, paket renklerine göre renklendirilir.
              </div>
              <div id="admin-users" class="list"></div>
            </div>

            <div class="card">
              <div class="section-title">Kullanıcı Mesajları</div>
              <div class="section-sub">
                Asistan üzerinden gelen veya kullanıcı panelinden iletilen mesajlar burada görünür.
              </div>
              <div id="admin-messages" class="list"></div>
              <div class="form-actions">
                <button class="btn-sm danger" id="btn-clear-messages">Geçmişi Temizle</button>
              </div>
            </div>
          </div>

          <div>
            <div class="card" style="margin-bottom:10px;">
              <div class="section-title">Reklam İstekleri</div>
              <div class="section-sub">
                Kullanıcıların gönderdiği istekleri onaylayabilir, reddedebilir ve kısa not
                bırakabilirsin.
              </div>
              <div id="admin-requests" class="list"></div>
              <div class="form-actions">
                <button class="btn-sm danger" id="btn-clear-requests">Tüm Geçmişi Sil</button>
              </div>
            </div>

            <div class="card">
              <div class="section-title">Fiyatlandırma ve Paketler</div>
              <div class="section-sub">
                Abonelik paketleri ve kredi paketleri burada. Sadece yönetici görebilir ve
                değiştirebilir.
              </div>

              <div class="pricing-grid" id="admin-pricing"></div>

              <div class="form-grid" style="margin-top:10px;">
                <div>
                  <label for="new-plan-name">Yeni Paket Adı</label>
                  <input id="new-plan-name" placeholder="Örn: Spark Pro" />
                </div>
                <div>
                  <label for="new-plan-type">Tür</label>
                  <select id="new-plan-type">
                    <option value="subscription">Abonelik</option>
                    <option value="credits">Kredi Paketi</option>
                  </select>
                </div>
                <div>
                  <label for="new-plan-price">Fiyat (TL)</label>
                  <input id="new-plan-price" type="number" min="0" step="50" value="1450" />
                </div>
                <div>
                  <label for="new-plan-perks">Kısa Not</label>
                  <input
                    id="new-plan-perks"
                    placeholder="Örn: Aylık 8 reklam, öncelikli teslim, gelişmiş AI"
                  />
                </div>
              </div>
              <div class="form-actions">
                <button class="btn-sm primary" id="btn-add-plan">Paket Ekle</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- PROFILE -->
      <section id="screen-profile" class="screen">
        <div class="card">
          <div class="profile-row">
            <div class="avatar-circle" id="profile-avatar">SA</div>
            <div>
              <div class="profile-name" id="profile-name">Kullanıcı adı</div>
              <div class="section-sub" id="profile-email">mail@ornek.com</div>
              <div id="profile-plan" class="tag standard">Standart Üye</div>
            </div>
          </div>

          <div class="columns-2">
            <div>
              <div class="section-title">Profilini Düzenle</div>
              <div class="section-sub">
                Görünen ismini değiştirebilir, AI asistanın sana nasıl hitap edeceğini
                belirleyebilirsin.
              </div>

              <div class="form-grid">
                <div>
                  <label for="profile-name-input">Görünen Ad</label>
                  <input id="profile-name-input" placeholder="Yeni görünen ad" />
                </div>
              </div>
              <div class="form-actions">
                <button class="btn-sm primary" id="btn-save-profile">
                  Profili Kaydet
                </button>
              </div>
            </div>

            <div>
              <div class="section-title">Kendi Grubunu Kur</div>
              <div class="section-sub">
                Örn: “Medya Ekibi”, “Sosyal Medya Squad” gibi bir grup adı gir. Sistem, kayıtlı
                kullanıcı isimleriyle eşleşebilecek önerileri mini bir simülasyon olarak
                gösterir.
              </div>
              <div class="form-grid">
                <div>
                  <label for="group-name-input">Grup Adı</label>
                  <input id="group-name-input" placeholder="Örn: Işıkkent Creative Squad" />
                </div>
              </div>
              <div class="form-actions">
                <button class="btn-sm primary" id="btn-create-group">
                  Grup Önerilerini Göster
                </button>
              </div>
              <ul id="group-suggestions" class="price-perks" style="margin-top:8px;"></ul>
            </div>
          </div>
        </div>
      </section>

      <!-- PRICING (USER) -->
      <section id="screen-pricing" class="screen">
        <div class="card">
          <div class="section-title">Paketler ve Abonelikler</div>
          <div class="section-sub">
            Aşağıdaki fiyatlar tanıtım amaçlıdır. Gerçek satın alma işlemi yoktur; bu proje
            tamamen demo ve öğrenme amaçlıdır. Yönetici panelinden TL fiyatları değiştirebilirsin.
          </div>
          <div class="pricing-grid" id="user-pricing"></div>
        </div>
      </section>

      <!-- COMMUNITY (şimdilik sade) -->
      <section id="screen-community" class="screen">
        <div class="card">
          <div class="section-title">Topluluk Akışı (Demo)</div>
          <div class="section-sub">
            Burada ileride kullanıcıların ürettiği reklam fikirleri, örnek videolar ve beğeni
            sayıları listelenebilir. Şimdilik sadece birkaç örnek satır gösteriyoruz.
          </div>
          <ul class="price-perks">
            <li><strong>Deneme 1:</strong> "Okçuluk kulübü için 6 saniyelik YouTube bumper" – 23 beğeni</li>
            <li><strong>Deneme 2:</strong> "Okul kantini için TikTok trend videosu" – 41 beğeni</li>
            <li><strong>Deneme 3:</strong> "Yeni forma lansmanı için Reels storyboard" – 12 beğeni</li>
          </ul>
        </div>
      </section>

      <!-- ASSISTANT ONLY SCREEN -->
      <section id="screen-assistant" class="screen">
        <div class="card">
          <div class="section-title">Spark AI Asistan (Tam Ekran)</div>
          <div class="section-sub">
            Aynı asistanı kullanıcı panelinde de görüyorsun; burada biraz daha geniş alanda
            konuşabilirsin.
          </div>
          <div class="chat-box">
            <div id="chat-log-2" class="chat-log"></div>
            <div class="chat-input-row">
              <input
                id="assistant-input-2"
                placeholder="Kulübün hakkında sor: Örn: 'Sponsorum için nasıl bir video çekmeliyim?'"
              />
              <button id="assistant-send-2">Gönder</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Basit localStorage tabanlı mini veritabanı
    const STORAGE_KEY = "spark_ad_studio_db_v1";

    const DEFAULT_DB = {
      users: [],
      requests: [],
      messages: [],
      plans: [
        {
          id: "starter",
          name: "Starter",
          type: "subscription",
          priceTl: 250,
          perks: "Aylık 1–2 kısa video, temel AI önerileri, standart hız",
          color: "standard",
        },
        {
          id: "pro",
          name: "Pro",
          type: "subscription",
          priceTl: 1100,
          perks: "Aylık 4–5 video, gelişmiş AI, öncelikli teslim",
          color: "pro",
        },
        {
          id: "influencer",
          name: "Influencer",
          type: "subscription",
          priceTl: 1600,
          perks: "Sınıra yakın üretim, marka tonu eğitimi, detaylı AI beyin fırtınası",
          color: "influencer",
        },
        {
          id: "credits-10",
          name: "10 Kredi Paketi",
          type: "credits",
          priceTl: 490,
          perks: "10 adet tekil reklam brifi üretmek için kredi",
          color: "standard",
        },
        {
          id: "credits-25",
          name: "25 Kredi Paketi",
          type: "credits",
          priceTl: 990,
          perks: "Yoğun sezonlar için 25 reklam kredisi",
          color: "pro",
        },
      ],
    };

    function loadDB() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return structuredClone(DEFAULT_DB);
        const parsed = JSON.parse(raw);
        return Object.assign(structuredClone(DEFAULT_DB), parsed);
      } catch (e) {
        console.warn("DB okunamadı, sıfırlanıyor:", e);
        return structuredClone(DEFAULT_DB);
      }
    }

    function saveDB() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(DB));
    }

    const DB = loadDB();

    // Ekran yönetimi
    const screens = {
      info: document.getElementById("screen-info"),
      auth: document.getElementById("screen-auth"),
      user: document.getElementById("screen-user"),
      admin: document.getElementById("screen-admin"),
      profile: document.getElementById("screen-profile"),
      pricing: document.getElementById("screen-pricing"),
      community: document.getElementById("screen-community"),
      assistant: document.getElementById("screen-assistant"),
    };

    const btnInfoStart = document.getElementById("btn-info-start");
    const btnInfoPricing = document.getElementById("btn-info-pricing");
    const btnAuth = document.getElementById("btn-auth");
    const btnLogout = document.getElementById("btn-logout");
    const navHome = document.getElementById("nav-home");
    const navStudio = document.getElementById("nav-studio");
    const navCommunity = document.getElementById("nav-community");
    const navAssistant = document.getElementById("nav-assistant");
    const navPricing = document.getElementById("nav-pricing");
    const navProfile = document.getElementById("nav-profile");

    let currentUser = null; // {name, email, plan}

    function showScreen(name) {
      Object.values(screens).forEach((el) => el.classList.remove("active"));
      if (screens[name]) screens[name].classList.add("active");
    }

    function updateTopbarForUser() {
      if (currentUser) {
        btnAuth.style.display = "none";
        btnLogout.style.display = "inline-flex";
        navHome.style.display = "inline-flex";
        navStudio.style.display = "inline-flex";
        navCommunity.style.display = "inline-flex";
        navAssistant.style.display = "inline-flex";
        navPricing.style.display = "inline-flex";
        navProfile.style.display = "inline-flex";
      } else {
        btnAuth.style.display = "inline-flex";
        btnLogout.style.display = "none";
        navHome.style.display = "inline-flex";
      }
    }

    // ----------------- AUTH ------------------
    const TAB_LOGIN = document.getElementById("tab-login");
    const TAB_REGISTER = document.getElementById("tab-register");
    const VIEW_LOGIN = document.getElementById("auth-login");
    const VIEW_REGISTER = document.getElementById("auth-register");
    const authMsg = document.getElementById("auth-message");

    const loginEmail = document.getElementById("login-email");
    const loginPass = document.getElementById("login-pass");
    const regName = document.getElementById("reg-name");
    const regEmail = document.getElementById("reg-email");
    const regPass = document.getElementById("reg-pass");

    const btnLogin = document.getElementById("btn-login");
    const btnRegister = document.getElementById("btn-register");
    const btnToLogin = document.getElementById("btn-to-login");

    // Yönetici bilgileri – sadece kodda, ekranda gösterilmiyor
    const ADMIN_EMAIL = "admin@sparkad.studio";
    const ADMIN_PASS = "spark123";

    TAB_LOGIN.addEventListener("click", () => {
      TAB_LOGIN.classList.add("active");
      TAB_REGISTER.classList.remove("active");
      VIEW_LOGIN.style.display = "";
      VIEW_REGISTER.style.display = "none";
      authMsg.textContent = "";
    });

    TAB_REGISTER.addEventListener("click", () => {
      TAB_REGISTER.classList.add("active");
      TAB_LOGIN.classList.remove("active");
      VIEW_REGISTER.style.display = "";
      VIEW_LOGIN.style.display = "none";
      authMsg.textContent = "";
    });

    btnToLogin.addEventListener("click", () => {
      TAB_LOGIN.click();
    });

    function findUserByEmail(email) {
      return DB.users.find((u) => u.email.toLowerCase() === email.toLowerCase());
    }

    function registerUser() {
      const name = regName.value.trim();
      const email = regEmail.value.trim();
      const pass = regPass.value.trim();
      if (!name || !email || !pass) {
        authMsg.textContent = "Lütfen tüm alanları doldur.";
        return;
      }
      if (pass.length < 6) {
        authMsg.textContent = "Şifre en az 6 karakter olmalı.";
        return;
      }
      if (findUserByEmail(email)) {
        authMsg.textContent = "Bu e-posta ile zaten bir hesap var.";
        return;
      }
      const user = {
        id: "u_" + Date.now(),
        name,
        email,
        pass,
        plan: "starter",
      };
      DB.users.push(user);
      saveDB();
      authMsg.textContent = "Kayıt başarılı! Giriş yapılıyor...";
      setTimeout(() => {
        loginEmail.value = email;
        loginPass.value = pass;
        loginUser();
      }, 400);
    }

    function loginUser() {
      const email = loginEmail.value.trim();
      const pass = loginPass.value.trim();
      if (!email || !pass) {
        authMsg.textContent = "Lütfen e-posta ve şifreyi doldur.";
        return;
      }

      // Yönetici mi?
      if (email === ADMIN_EMAIL && pass === ADMIN_PASS) {
        currentUser = {
          name: "Yönetici",
          email: ADMIN_EMAIL,
          plan: "admin",
        };
        authMsg.textContent = "Yönetici olarak giriş yapıldı.";
        updateTopbarForUser();
        renderAdmin();
        showScreen("admin");
        return;
      }

      const user = findUserByEmail(email);
      if (!user || user.pass !== pass) {
        authMsg.textContent = "E-posta veya şifre hatalı.";
        return;
      }

      currentUser = { name: user.name, email: user.email, plan: user.plan };
      authMsg.textContent = "Giriş başarılı!";
      updateTopbarForUser();
      renderUserDashboard();
      showScreen("user");
    }

    btnRegister.addEventListener("click", registerUser);
    btnLogin.addEventListener("click", loginUser);

    document.getElementById("btn-forgot").addEventListener("click", () => {
      authMsg.textContent =
        "Bu proje demo olduğu için gerçek şifre sıfırlama yok. İstersen yeni bir hesap açabilirsin.";
    });

    // ----------------- USER DASHBOARD ------------------
    const userWelcome = document.getElementById("user-welcome");
    const userPlanBadge = document.getElementById("user-plan-badge");
    const userPerksList = document.getElementById("user-perks");

    const reqBrand = document.getElementById("req-brand");
    const reqProduct = document.getElementById("req-product");
    const reqDetails = document.getElementById("req-details");
    const btnSendRequest = document.getElementById("btn-send-request");
    const reqHint = document.getElementById("req-hint");

    function getPlanMeta(planId) {
      if (planId === "admin") {
        return { label: "Yönetici", color: "standard", perks: [] };
      }
      const p = DB.plans.find((pl) => pl.id === planId) || null;
      if (!p) {
        return {
          label: "Standart Üye",
          color: "standard",
          perks: ["Temel haklar"],
        };
      }
      let label = p.name + " Üye";
      if (p.id === "influencer") label = "Influencer Müşterisi";
      const perks = [];
      if (p.id === "starter") {
        perks.push(
          "Aylık 1–2 reklam brifi",
          "Temel yapay zeka önerileri",
          "Standart öncelik"
        );
      } else if (p.id === "pro") {
        perks.push(
          "Aylık 4–5 reklam brifi",
          "Daha derin AI cevapları",
          "Öncelikli inceleme",
          "Paket rengin panellerde yeşil görünecek"
        );
      } else if (p.id === "influencer") {
        perks.push(
          "Kapsamlı kampanya beyin fırtınası",
          "Detaylı storyboard önerileri",
          "Toplulukta 'Influencer Müşterisi' etiketi",
          "Renk teması turuncu / altın tonları",
          "Kullanıcı ismin öne çıkarılır"
        );
      } else {
        perks.push(p.perks);
      }
      return { label, color: p.color || "standard", perks };
    }

    function renderUserDashboard() {
      if (!currentUser) return;
      const meta = getPlanMeta(currentUser.plan);
      userWelcome.textContent = `Hoş geldin, ${currentUser.name}!`;
      userPlanBadge.textContent = meta.label;
      userPlanBadge.className = "tag " + (meta.color || "standard");

      userPerksList.innerHTML = "";
      meta.perks.forEach((perk) => {
        const li = document.createElement("li");
        li.textContent = perk;
        userPerksList.appendChild(li);
      });

      renderProfile();
    }

    btnSendRequest.addEventListener("click", () => {
      if (!currentUser) {
        reqHint.textContent = "İstek göndermek için önce giriş yapmalısın.";
        return;
      }
      const brand = reqBrand.value.trim();
      const product = reqProduct.value.trim();
      const details = reqDetails.value.trim();
      if (!brand || !product || !details) {
        reqHint.textContent = "Lütfen marka, ürün ve açıklama kısmını doldur.";
        return;
      }
      const req = {
        id: "r_" + Date.now(),
        userEmail: currentUser.email,
        userName: currentUser.name,
        brand,
        product,
        details,
        status: "pending",
        note: "",
        createdAt: new Date().toISOString(),
      };
      DB.requests.unshift(req);
      saveDB();
      reqHint.textContent =
        "İstek gönderildi! Yönetici onayladıktan sonra stüdyoda görünecek.";
      reqBrand.value = "";
      reqProduct.value = "";
      reqDetails.value = "";
      renderAdminRequests();
    });

    // ----------------- CHAT / AI ASISTAN ------------------
    const assistantInput = document.getElementById("assistant-input");
    const assistantSend = document.getElementById("assistant-send");
    const chatLog = document.getElementById("chat-log");

    const assistantInput2 = document.getElementById("assistant-input-2");
    const assistantSend2 = document.getElementById("assistant-send-2");
    const chatLog2 = document.getElementById("chat-log-2");

    function pushChat(target, who, text) {
      const log = target === "main" ? chatLog : chatLog2;
      const line = document.createElement("div");
      line.className = "chat-line " + who;
      const bubble = document.createElement("div");
      bubble.className = "chat-bubble";
      const meta = document.createElement("div");
      meta.className = "chat-meta";
      meta.textContent = who === "me" ? (currentUser?.name || "Sen") : "Spark AI";
      const body = document.createElement("div");
      body.textContent = text;
      bubble.appendChild(meta);
      bubble.appendChild(body);
      line.appendChild(bubble);
      log.appendChild(line);
      log.scrollTop = log.scrollHeight;
    }

    function generateAssistantAnswer(prompt) {
      const base =
        "Kulübün için güzel bir reklam fikri çıkarmak üzere sana yardımcı oluyorum. ";
      const meta = currentUser ? getPlanMeta(currentUser.plan) : null;
      const level =
        currentUser && currentUser.plan === "influencer"
          ? "Sen Influencer seviyesinde olduğun için daha detaylı ve kampanya odaklı bir öneri sunuyorum."
          : currentUser && currentUser.plan === "pro"
          ? "Pro paketli bir kullanıcı olduğun için orta detaylı ama odaklı bir öneri veriyorum."
          : "Standart seviyede, kısa ama uygulanabilir bir öneri vereceğim.";

      let idea =
        "Önce 3 parçalı bir yapı düşün: 1) açılışta hızlı ve dikkat çeken bir sahne, 2) kulübün duygusunu gösteren kısa bir an, 3) logon ve net bir çağrı (örn. 'Bize katıl').";

      if (prompt.toLowerCase().includes("okçuluk")) {
        idea =
          "Kamerayı hedefe doğru yaklaşırken çek, ok tam isabet olduğunda kısa bir slow-motion ve üstüne slogan: 'Hedefini Bize Söyle, Gerisini Biz Halledelim'. Ardından kulüp antrenmanından gülümseyen kısa planlar göster.";
      } else if (prompt.toLowerCase().includes("forma")) {
        idea =
          "Eski formadan yeni formaya geçiş efekti kullan. Bir oyuncu eski formayla kadraja girer, kısa bir dönüşle yeni formaya geçer. Alt yazıda 'Yeni Sezon, Yeni Hedefler' yazsın, en sonda fiyat ve satış noktası gelsin.";
      }

      return base + level + " Önerim: " + idea;
    }

    function handleAssistantSend(target) {
      const input = target === "main" ? assistantInput : assistantInput2;
      const text = input.value.trim();
      if (!text) return;
      pushChat(target, "me", text);
      input.value = "";
      const answer = generateAssistantAnswer(text);
      setTimeout(() => {
        pushChat(target, "ai", answer);
        DB.messages.push({
          id: "m_" + Date.now(),
          fromEmail: currentUser ? currentUser.email : "misafir",
          text,
          answer,
          createdAt: new Date().toISOString(),
        });
        saveDB();
        renderAdminMessages();
      }, 250);
    }

    assistantSend.addEventListener("click", () => handleAssistantSend("main"));
    assistantInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        handleAssistantSend("main");
      }
    });

    assistantSend2.addEventListener("click", () => handleAssistantSend("full"));
    assistantInput2.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        handleAssistantSend("full");
      }
    });

    // ----------------- ADMIN RENDER ------------------
    const adminUsersEl = document.getElementById("admin-users");
    const adminRequestsEl = document.getElementById("admin-requests");
    const adminMessagesEl = document.getElementById("admin-messages");
    const adminPricingEl = document.getElementById("admin-pricing");

    function renderAdminUsers() {
      adminUsersEl.innerHTML = "";
      DB.users.forEach((u) => {
        const meta = getPlanMeta(u.plan);
        const item = document.createElement("div");
        item.className = "list-item";
        const labelRow = document.createElement("div");
        labelRow.className = "label-row";
        const strong = document.createElement("strong");
        strong.textContent = u.name;
        strong.style.color =
          meta.color === "influencer"
            ? "#fed7aa"
            : meta.color === "pro"
            ? "#bbf7d0"
            : "#e5e7eb";
        const pill = document.createElement("span");
        pill.className =
          "pill-small " +
          (meta.color === "influencer"
            ? "orange"
            : meta.color === "pro"
            ? "green"
            : "blue");
        pill.textContent = meta.label;
        labelRow.appendChild(strong);
        labelRow.appendChild(pill);
        const metaLine = document.createElement("div");
        metaLine.className = "list-meta";
        metaLine.textContent = `${u.email} • Paket: ${u.plan}`;
        item.appendChild(labelRow);
        item.appendChild(metaLine);
        adminUsersEl.appendChild(item);
      });
    }

    function renderAdminRequests() {
      adminRequestsEl.innerHTML = "";
      DB.requests.forEach((r) => {
        const item = document.createElement("div");
        item.className = "list-item";
        const labelRow = document.createElement("div");
        labelRow.className = "label-row";

        const strong = document.createElement("strong");
        strong.textContent = r.brand + " – " + r.product;
        const status = document.createElement("span");
        status.className =
          "pill-small " +
          (r.status === "approved"
            ? "green"
            : r.status === "rejected"
            ? "orange"
            : "gray");
        status.textContent =
          r.status === "approved"
            ? "Onaylandı"
            : r.status === "rejected"
            ? "Reddedildi"
            : "Bekliyor";

        labelRow.appendChild(strong);
        labelRow.appendChild(status);

        const meta = document.createElement("div");
        meta.className = "list-meta";
        meta.textContent =
          `${r.userName} (${r.userEmail}) • ${new Date(
            r.createdAt
          ).toLocaleString("tr-TR")}`;

        const details = document.createElement("div");
        details.style.marginTop = "4px";
        details.textContent = r.details;

        const actions = document.createElement("div");
        actions.className = "admin-actions";

        const okBtn = document.createElement("button");
        okBtn.className = "ok";
        okBtn.textContent = "Onayla";
        okBtn.addEventListener("click", () => {
          r.status = "approved";
          saveDB();
          renderAdminRequests();
        });

        const noBtn = document.createElement("button");
        noBtn.className = "dgr";
        noBtn.textContent = "Reddet";
        noBtn.addEventListener("click", () => {
          r.status = "rejected";
          saveDB();
          renderAdminRequests();
        });

        actions.appendChild(okBtn);
        actions.appendChild(noBtn);

        item.appendChild(labelRow);
        item.appendChild(meta);
        item.appendChild(details);
        item.appendChild(actions);

        adminRequestsEl.appendChild(item);
      });
    }

    function renderAdminMessages() {
      adminMessagesEl.innerHTML = "";
      DB.messages.forEach((m) => {
        const item = document.createElement("div");
        item.className = "list-item";
        const labelRow = document.createElement("div");
        labelRow.className = "label-row";
        const strong = document.createElement("strong");
        strong.textContent = m.fromEmail;
        const pill = document.createElement("span");
        pill.className = "pill-small blue";
        pill.textContent = "AI sohbeti";
        labelRow.appendChild(strong);
        labelRow.appendChild(pill);
        const meta = document.createElement("div");
        meta.className = "list-meta";
        meta.textContent = new Date(m.createdAt).toLocaleString("tr-TR");
        const text = document.createElement("div");
        text.style.marginTop = "4px";
        text.textContent = "Kullanıcı: " + m.text;
        const ans = document.createElement("div");
        ans.style.marginTop = "2px";
        ans.style.fontSize = "11px";
        ans.style.color = "#9ca3af";
        ans.textContent = "AI: " + m.answer;
        item.appendChild(labelRow);
        item.appendChild(meta);
        item.appendChild(text);
        item.appendChild(ans);
        adminMessagesEl.appendChild(item);
      });
    }

    function renderAdminPricing() {
      adminPricingEl.innerHTML = "";
      DB.plans.forEach((p) => {
        const card = document.createElement("div");
        card.className = "price-card";
        const name = document.createElement("div");
        name.className = "price-name";
        name.textContent = p.name;
        const tag = document.createElement("div");
        tag.className = "price-tag";
        tag.textContent =
          p.type === "subscription" ? "Abonelik Paketi" : "Kredi Paketi";
        const value = document.createElement("div");
        value.className = "price-value";
        value.textContent = `${p.priceTl.toLocaleString("tr-TR")} TL`;
        const note = document.createElement("div");
        note.className = "price-note";
        note.textContent = p.perks;
        card.appendChild(name);
        card.appendChild(tag);
        card.appendChild(value);
        card.appendChild(note);
        adminPricingEl.appendChild(card);
      });
    }

    function renderAdmin() {
      renderAdminUsers();
      renderAdminRequests();
      renderAdminMessages();
      renderAdminPricing();
    }

    document
      .getElementById("btn-clear-messages")
      .addEventListener("click", () => {
        DB.messages = [];
        saveDB();
        renderAdminMessages();
      });

    document
      .getElementById("btn-clear-requests")
      .addEventListener("click", () => {
        DB.requests = [];
        saveDB();
        renderAdminRequests();
      });

    document.getElementById("btn-add-plan").addEventListener("click", () => {
      const name = document.getElementById("new-plan-name").value.trim();
      const type = document.getElementById("new-plan-type").value;
      const price = Number(
        document.getElementById("new-plan-price").value || "0"
      );
      const perks = document.getElementById("new-plan-perks").value.trim();
      if (!name || !perks) return;
      DB.plans.push({
        id: "p_" + Date.now(),
        name,
        type,
        priceTl: price,
        perks,
        color: type === "subscription" ? "pro" : "standard",
      });
      saveDB();
      renderAdminPricing();
    });

    // ----------------- PROFILE ------------------
    const profileAvatar = document.getElementById("profile-avatar");
    const profileName = document.getElementById("profile-name");
    const profileEmail = document.getElementById("profile-email");
    const profilePlan = document.getElementById("profile-plan");
    const profileNameInput = document.getElementById("profile-name-input");
    const btnSaveProfile = document.getElementById("btn-save-profile");
    const groupNameInput = document.getElementById("group-name-input");
    const btnCreateGroup = document.getElementById("btn-create-group");
    const groupSuggestions = document.getElementById("group-suggestions");

    function renderProfile() {
      if (!currentUser) return;
      const meta = getPlanMeta(currentUser.plan);
      profileName.textContent = currentUser.name;
      profileEmail.textContent = currentUser.email;
      profilePlan.textContent = meta.label;
      profilePlan.className = "tag " + (meta.color || "standard");
      const initials =
        currentUser.name
          .split(" ")
          .map((p) => p[0])
          .join("")
          .slice(0, 2)
          .toUpperCase() || "SA";
      profileAvatar.textContent = initials;
    }

    btnSaveProfile.addEventListener("click", () => {
      const newName = profileNameInput.value.trim();
      if (!newName || !currentUser) return;
      currentUser.name = newName;
      const usr = findUserByEmail(currentUser.email);
      if (usr) usr.name = newName;
      saveDB();
      renderUserDashboard();
      renderProfile();
      profileNameInput.value = "";
    });

    btnCreateGroup.addEventListener("click", () => {
      const gName = groupNameInput.value.trim();
      groupSuggestions.innerHTML = "";
      if (!gName) return;
      const sample = DB.users.slice(0, 5);
      sample.forEach((u) => {
        const li = document.createElement("li");
        li.textContent = `${gName} ekibinde olabilecek kişi: ${u.name} (${u.email})`;
        groupSuggestions.appendChild(li);
      });
      if (sample.length === 0) {
        const li = document.createElement("li");
        li.textContent =
          "Şu an kayıtlı başka kullanıcı yok. Yine de grup adın harika: " +
          gName +
          " 🎉";
        groupSuggestions.appendChild(li);
      }
    });

    // ----------------- PRICING (USER VIEW) ------------------
    const userPricingEl = document.getElementById("user-pricing");

    function renderUserPricing() {
      userPricingEl.innerHTML = "";
      DB.plans.forEach((p) => {
        const card = document.createElement("div");
        card.className = "price-card";
        const name = document.createElement("div");
        name.className = "price-name";
        name.textContent = p.name;
        const tag = document.createElement("div");
        tag.className = "price-tag";
        tag.textContent =
          p.type === "subscription" ? "Abonelik" : "Kredi paketi (demo)";
        const value = document.createElement("div");
        value.className = "price-value";
        value.textContent = `${p.priceTl.toLocaleString("tr-TR")} TL`;
        const note = document.createElement("div");
        note.className = "price-note";
        note.textContent = p.perks;
        card.appendChild(name);
        card.appendChild(tag);
        card.appendChild(value);
        card.appendChild(note);
        userPricingEl.appendChild(card);
      });
    }

    // ----------------- NAVIGATION ------------------
    btnInfoStart.addEventListener("click", () => {
      showScreen("auth");
    });

    btnInfoPricing.addEventListener("click", () => {
      renderUserPricing();
      showScreen("pricing");
    });

    btnAuth.addEventListener("click", () => {
      showScreen("auth");
    });

    btnLogout.addEventListener("click", () => {
      currentUser = null;
      updateTopbarForUser();
      showScreen("info");
    });

    navHome.addEventListener("click", () => {
      if (currentUser && currentUser.email === ADMIN_EMAIL) {
        showScreen("admin");
      } else if (currentUser) {
        showScreen("user");
      } else {
        showScreen("info");
      }
    });

    navStudio.addEventListener("click", () => {
      if (currentUser && currentUser.email === ADMIN_EMAIL) {
        showScreen("admin");
      } else if (currentUser) {
        showScreen("user");
      } else {
        showScreen("info");
      }
    });

    navCommunity.addEventListener("click", () => showScreen("community"));
    navAssistant.addEventListener("click", () => showScreen("assistant"));
    navPricing.addEventListener("click", () => {
      renderUserPricing();
      showScreen("pricing");
    });
    navProfile.addEventListener("click", () => {
      renderProfile();
      showScreen("profile");
    });

    // İlk yüklemede
    updateTopbarForUser();
    renderUserPricing();
    console.log("Spark Ad Studio front-end yüklendi ✅");
  </script>
</body>
</html>
