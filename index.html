<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spark Ad Studio | Reklam Uygulaması</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg: #050816;
      --card: #11182b;
      --text: #ffffff;
      --muted: #9aa0b8;
      --accent: #ff7a3c;
    }

    body {
      margin: 0;
      background: var(--bg);
      font-family: "Poppins", sans-serif;
      color: var(--text);
    }

    .hidden { display: none !important; }

    header {
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(8px);
      position: sticky;
      top: 0;
    }

    .logo-box {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-box img {
      width: 42px;
      height: 42px;
      background: #fff;
      border-radius: 10px;
      padding: 4px;
    }

    .title { font-size: 19px; font-weight: 600; }
    .subtitle { font-size: 11px; color: var(--muted); }

    .nav-action {
      background: var(--accent);
      border: none;
      padding: 8px 15px;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      color: #000;
    }

    /* Bilgi ekranı */
    #screen-info {
      padding: 50px 20px;
      max-width: 900px;
      margin: auto;
    }

    h1 {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 10px;
    }

    h1 span {
      color: var(--accent);
    }

    .lead {
      color: var(--muted);
      font-size: 15px;
      max-width: 600px;
    }

    .info-card {
      background: var(--card);
      padding: 20px;
      border-radius: 15px;
      margin-top: 25px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .info-btn {
      background: var(--accent);
      color: #000;
      padding: 12px 18px;
      border-radius: 12px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
    }
  </style>
</head>

<body>

<header>
  <div class="logo-box">
    <img src="spark-logo.png" alt="logo" />
    <div>
      <div class="title">Spark Ad Studio</div>
      <div class="subtitle">Kulüpler & Markalar İçin Reklam</div>
    </div>
  </div>

  <button class="nav-action" onclick="showScreen('auth')">Üye Ol / Giriş Yap</button>
</header>

<!-- BİLGİ SAYFASI -->
<div id="screen-info">
  <h1><span>Spark Ad Studio</span> ile kendi reklam fikirlerini oluştur!</h1>

  <p class="lead">
    Spark Ad Studio; kulüpler ve markalar için genç bakış açısıyla reklam fikirleri üreten
    mini bir dijital platformdur. Üye ol → giriş yap → reklam isteği gönder → Yönetici onaylasın.
  </p>

  <div class="info-card">
    <h3>Bu platformda neler yapabilirsin?</h3>
    <ul style="margin-left: 20px; font-size:14px; color: var(--muted);">
      <li>Reklam isteği gönderebilirsin.</li>
      <li>Yönetici’ye (admin) mesaj atabilirsin.</li>
      <li>Bildirimlerden onay durumunu takip edebilirsin.</li>
    </ul>
  </div>

  <button class="info-btn" onclick="showScreen('auth')">
    Üye Ol / Giriş Yap
  </button>
</div>
<!-- GİRİŞ & ÜYE OL EKRANI -->
<div id="screen-auth" class="hidden" style="padding:40px 20px; max-width:400px; margin:auto;">

  <h2 style="text-align:center; margin-bottom:20px;">Giriş Yap veya Üye Ol</h2>

  <div id="auth-forms">

    <!-- GİRİŞ FORMU -->
    <div id="login-form">
      <label>Email</label>
      <input id="login-email" type="email" style="width:100%; padding:10px; margin-bottom:10px; border-radius:10px; border:none;" />

      <label>Şifre</label>
      <input id="login-password" type="password" style="width:100%; padding:10px; margin-bottom:20px; border-radius:10px; border:none;" />

      <button onclick="loginUser()" style="width:100%; padding:12px; background:#ff7a3c; border:none; border-radius:10px; font-weight:600;">Giriş Yap</button>

      <p style="text-align:center; margin-top:15px; font-size:13px; color:#ccc;">
        Hesabın yok mu? 
        <a href="#" onclick="switchToRegister()" style="color:#ff7a3c;">Üye Ol</a>
      </p>
    </div>

    <!-- ÜYE OL FORMU -->
    <div id="register-form" class="hidden">
      <label>Ad Soyad</label>
      <input id="reg-name" type="text" style="width:100%; padding:10px; margin-bottom:10px; border-radius:10px; border:none;" />

      <label>Email</label>
      <input id="reg-email" type="email" style="width:100%; padding:10px; margin-bottom:10px; border-radius:10px; border:none;" />

      <label>Şifre</label>
      <input id="reg-password" type="password" style="width:100%; padding:10px; margin-bottom:20px; border-radius:10px; border:none;" />

      <button onclick="registerUser()" style="width:100%; padding:12px; background:#ff7a3c; border:none; border-radius:10px; font-weight:600;">Üye Ol</button>

      <p style="text-align:center; margin-top:15px; font-size:13px; color:#ccc;">
        Zaten hesabın var mı? 
        <a href="#" onclick="switchToLogin()" style="color:#ff7a3c;">Giriş Yap</a>
      </p>
    </div>

  </div>
</div>
<!-- ANA SAYFA -->
<div id="screen-main" class="hidden" style="padding:40px 20px; max-width:800px; margin:auto;">

  <h2>Bildirimler</h2>

  <div id="notifications" style="margin-top:20px;">

    <p style="color:#bbb; font-size:14px;">Henüz bir bildirimin yok.</p>

  </div>

</div>


<!-- AYARLAR / STÜDYO EKRANI -->
<div id="screen-settings" class="hidden" style="padding:40px 20px; max-width:800px; margin:auto;">

  <h2>Stüdyo & Ayarlar</h2>

  <div style="margin-top:20px;">

    <!-- PROFİL BİLGİSİ -->
    <div style="background:#11182b; padding:20px; border-radius:12px; margin-bottom:25px;">
      <h3>Profil Bilgilerin</h3>
      <p id="profile-info" style="color:#bbb; font-size:14px; margin-top:8px;"></p>
    </div>

    <!-- REKLAM İSTEĞİ -->
    <div style="background:#11182b; padding:20px; border-radius:12px; margin-bottom:25px;">
      <h3>Reklam İsteği Gönder</h3>
      <textarea id="ad-request-text" placeholder="Reklam isteğini buraya yaz..." style="width:100%; padding:12px; border-radius:10px; margin-top:10px; height:120px; border:none;"></textarea>
      <button onclick="sendAdRequest()" style="background:#ff7a3c; border:none; padding:10px 15px; border-radius:10px; margin-top:10px; cursor:pointer; font-weight:600;">Gönder</button>
    </div>

    <!-- MESAJ GÖNDER -->
    <div style="background:#11182b; padding:20px; border-radius:12px;">
      <h3>Yöneticiye Mesaj Gönder</h3>
      <textarea id="message-to-admin" placeholder="Yöneticiye mesajın..." style="width:100%; padding:12px; border-radius:10px; margin-top:10px; height:120px; border:none;"></textarea>
      <button onclick="sendMessageToAdmin()" style="background:#ff7a3c; border:none; padding:10px 15px; border-radius:10px; margin-top:10px; cursor:pointer; font-weight:600;">Mesaj Gönder</button>
    </div>

  </div>
</div>
<!-- YÖNETİCİ PANELİ -->
<div id="screen-admin" class="hidden" style="padding:40px 20px; max-width:900px; margin:auto;">

  <h2>Yönetici Paneli</h2>

  <!-- MENÜ -->
  <div style="margin-top:20px; display:flex; gap:10px;">
    <button onclick="adminTab('requests')" style="padding:10px 15px; border-radius:10px; background:#ff7a3c; border:none; cursor:pointer; font-weight:600;">
      Reklam İstekleri
    </button>

    <button onclick="adminTab('messages')" style="padding:10px 15px; border-radius:10px; background:#ff7a3c; border:none; cursor:pointer; font-weight:600;">
      Mesajlar
    </button>

    <button onclick="adminTab('users')" style="padding:10px 15px; border-radius:10px; background:#ff7a3c; border:none; cursor:pointer; font-weight:600;">
      Üyeler
    </button>
  </div>

  <!-- REKLAM İSTEKLERİ -->
  <div id="admin-requests" style="margin-top:25px;">
    <h3>Gelen Reklam İstekleri</h3>
    <div id="admin-request-list" style="margin-top:15px; color:#ccc; font-size:14px;">
      Henüz reklam isteği yok.
    </div>
  </div>

  <!-- MESAJLAR -->
  <div id="admin-messages" class="hidden" style="margin-top:25px;">
    <h3>Kullanıcı Mesajları</h3>
    <div id="admin-message-list" style="margin-top:15px; color:#ccc; font-size:14px;">
      Mesaj bulunmuyor.
    </div>
  </div>

  <!-- ÜYELER -->
  <div id="admin-users" class="hidden" style="margin-top:25px;">
    <h3>Üye Olan Kullanıcılar</h3>
    <div id="admin-user-list" style="margin-top:15px; color:#ccc; font-size:14px;">
      Henüz üye yok.
    </div>
  </div>

</div>
<script>
/* -----------------------------
   EKRAN DEĞİŞTİRME FONKSİYONU
-------------------------------- */
function showScreen(id) {
  document.querySelectorAll("[id^='screen']").forEach(s => s.classList.add("hidden"));
  document.getElementById("screen-" + id).classList.remove("hidden");

  // Menü görünürlüğü
  let navLinks = document.getElementById("navLinks");
  if (id === "main" || id === "settings" || id === "admin") {
    navLinks.classList.remove("hidden");
  } else {
    navLinks.classList.add("hidden");
  }
}

/* -----------------------------
   EKRAN KISAYOLLARI
-------------------------------- */
function navigateMain() { showScreen("main"); }
function navigateSettings() { showScreen("settings"); }

/* -----------------------------
   KULLANICI VERİ TABANI (localStorage)
-------------------------------- */
function getUsers() {
  return JSON.parse(localStorage.getItem("users") || "[]");
}

function saveUsers(list) {
  localStorage.setItem("users", JSON.stringify(list));
}

/* -----------------------------
   GİRİŞ & ÜYE OLME
-------------------------------- */
function switchToRegister() {
  document.getElementById("login-form").classList.add("hidden");
  document.getElementById("register-form").classList.remove("hidden");
}

function switchToLogin() {
  document.getElementById("register-form").classList.add("hidden");
  document.getElementById("login-form").classList.remove("hidden");
}

/* -----------------------------
   ÜYE OL
-------------------------------- */
function registerUser() {
  let name = document.getElementById("reg-name").value.trim();
  let email = document.getElementById("reg-email").value.trim();
  let pass = document.getElementById("reg-password").value.trim();

  if (!name || !email || !pass) {
    alert("Lütfen tüm bilgileri doldurun.");
    return;
  }

  let users = getUsers();

  if (users.some(u => u.email === email)) {
    alert("Bu email zaten kayıtlı!");
    return;
  }

  users.push({
    name,
    email,
    password: pass,
    role: "user",
    createdAt: new Date().toLocaleString()
  });

  saveUsers(users);

  alert("Üyelik başarılı! Şimdi giriş yapabilirsin.");
  switchToLogin();
}

/* -----------------------------
   GİRİŞ YAP
-------------------------------- */
let currentUser = null;

function loginUser() {
  let email = document.getElementById("login-email").value.trim();
  let pass = document.getElementById("login-password").value.trim();

  if (!email || !pass) {
    alert("Lütfen email ve şifre girin.");
    return;
  }

  // Yönetici girişi
  if (email === "admin" && pass === "spark123") {
    currentUser = { role: "admin", name: "Yönetici" };
    alert("Yönetici giriş başarılı!");
    loadAdminPanels();
    showScreen("admin");
    return;
  }

  // Kullanıcı girişi
  let users = getUsers();
  let found = users.find(u => u.email === email && u.password === pass);

  if (!found) {
    alert("Email veya şifre yanlış!");
    return;
  }

  currentUser = found;
  loadUserProfile();
  loadNotifications();
  showScreen("main");
}

/* -----------------------------
   PROFİLİ YÜKLE
-------------------------------- */
function loadUserProfile() {
  document.getElementById("profile-info").innerText =
    `Ad Soyad: ${currentUser.name}\nEmail: ${currentUser.email}`;
}

/* -----------------------------
   BİLDİRİMLERİ YÜKLE
-------------------------------- */
function loadNotifications() {
  let list = JSON.parse(localStorage.getItem("notifications") || "[]");
  let area = document.getElementById("notifications");

  let userNotifs = list.filter(n => n.email === currentUser.email);

  if (userNotifs.length === 0) {
    area.innerHTML = `<p style="color:#bbb;">Henüz bir bildirimin yok.</p>`;
    return;
  }

  area.innerHTML = userNotifs
    .map(n => `<div style="margin-bottom:10px;">✔ ${n.text}</div>`)
    .join("");
}

/* -----------------------------
   REKLAM İSTEĞİ GÖNDER
-------------------------------- */
function sendAdRequest() {
  let text = document.getElementById("ad-request-text").value.trim();
  if (!text) {
    alert("Lütfen reklam isteğini yaz.");
    return;
  }

  let requests = JSON.parse(localStorage.getItem("adRequests") || "[]");

  requests.push({
    email: currentUser.email,
    name: currentUser.name,
    text,
    status: "pending",
    date: new Date().toLocaleString()
  });

  localStorage.setItem("adRequests", JSON.stringify(requests));

  alert("Reklam isteği gönderildi!");
  document.getElementById("ad-request-text").value = "";
}

/* -----------------------------
   MESAJ GÖNDER
-------------------------------- */
function sendMessageToAdmin() {
  let msg = document.getElementById("message-to-admin").value.trim();
  if (!msg) {
    alert("Mesaj boş olamaz.");
    return;
  }

  let msgs = JSON.parse(localStorage.getItem("adminMsgs") || "[]");

  msgs.push({
    email: currentUser.email,
    name: currentUser.name,
    msg,
    date: new Date().toLocaleString()
  });

  localStorage.setItem("adminMsgs", JSON.stringify(msgs));

  alert("Mesaj Yönetici’ye gönderildi!");
  document.getElementById("message-to-admin").value = "";
}

/* -----------------------------
   YÖNETİCİ PANELİ
-------------------------------- */
function loadAdminPanels() {
  loadAdminRequests();
  loadAdminMessages();
  loadAdminUsers();
}

/* REKLAM İSTEKLERİ */
function loadAdminRequests() {
  let list = JSON.parse(localStorage.getItem("adRequests") || "[]");
  let area = document.getElementById("admin-request-list");

  if (list.length === 0) {
    area.innerHTML = "İstek bulunmuyor.";
    return;
  }

  area.innerHTML = list.map((r, i) => `
    <div style="background:#11182b; padding:15px; border-radius:10px; margin-bottom:10px;">
      <b>${r.name}</b> (${r.email})<br>
      <i>${r.text}</i><br><br>
      Durum: <b>${r.status}</b><br><br>

      ${r.status === "pending" ? `
        <button onclick="approveRequest(${i})" style="background:#34d399; border:none; padding:8px 12px; border-radius:8px; cursor:pointer;">Onayla</button>
        <button onclick="rejectRequest(${i})" style="background:#ef4444; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; margin-left:6px;">Reddet</button>
      ` : ""}
    </div>
  `).join("");
}

function approveRequest(i) {
  let list = JSON.parse(localStorage.getItem("adRequests") || "[]");
  let item = list[i];

  item.status = "approved";

  localStorage.setItem("adRequests", JSON.stringify(list));

  // Bildirim ekle
  let notif = JSON.parse(localStorage.getItem("notifications") || "[]");
  notif.push({
    email: item.email,
    text: "Reklam isteğin Yönetici tarafından ONAYLANDI!"
  });
  localStorage.setItem("notifications", JSON.stringify(notif));

  loadAdminRequests();
}

function rejectRequest(i) {
  let list = JSON.parse(localStorage.getItem("adRequests") || "[]");

  // Eğer onaylıysa reddedilemez
  if (list[i].status === "approved") {
    alert("Onaylanan bir istek reddedilemez.");
    return;
  }

  list[i].status = "rejected";

  localStorage.setItem("adRequests", JSON.stringify(list));

  // Bildirim ekle
  let notif = JSON.parse(localStorage.getItem("notifications") || "[]");
  notif.push({
    email: list[i].email,
    text: "Reklam isteğin Yönetici tarafından REDDEDİLDİ."
  });
  localStorage.setItem("notifications", JSON.stringify(notif));

  loadAdminRequests();
}

/* -----------------------------
   YÖNETİCİ: MESAJLAR
-------------------------------- */
function loadAdminMessages() {
  let msgs = JSON.parse(localStorage.getItem("adminMsgs") || "[]");
  let area = document.getElementById("admin-message-list");

  if (msgs.length === 0) {
    area.innerHTML = "Mesaj bulunmuyor.";
    return;
  }

  area.innerHTML = msgs.map(m => `
    <div style="background:#11182b; padding:15px; border-radius:10px; margin-bottom:10px;">
      <b>${m.name}</b> (${m.email})<br><br>
      ${m.msg}<br><br>
      <span style="color:#888; font-size:12px;">${m.date}</span>
    </div>
  `).join("");
}

/* -----------------------------
   YÖNETİCİ: ÜYELER
-------------------------------- */
function loadAdminUsers() {
  let users = getUsers();
  let area = document.getElementById("admin-user-list");

  if (users.length === 0) {
    area.innerHTML = "Üye bulunmuyor.";
    return;
  }

  area.innerHTML = users.map(u => `
    <div style="background:#11182b; padding:12px; border-radius:10px; margin-bottom:10px;">
      <b>${u.name}</b><br>
      Email: ${u.email}<br>
      Kayıt Tarihi: ${u.createdAt}
    </div>
  `).join("");
}

/* -----------------------------
   YÖNETİCİ MENÜ GEÇİŞİ
-------------------------------- */
function adminTab(tab) {
  document.getElementById("admin-requests").classList.add("hidden");
  document.getElementById("admin-messages").classList.add("hidden");
  document.getElementById("admin-users").classList.add("hidden");

  document.getElementById("admin-" + tab).classList.remove("hidden");
}
</script>

</body>
</html>
